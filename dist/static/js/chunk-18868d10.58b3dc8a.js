(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-18868d10","chunk-57f4273a","chunk-556e5e0f","chunk-5e04f6b8","chunk-09393360"],{"05ba":function(e,t){var a="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(a){var s=new Uint8Array(16);e.exports=function(){return a(s),s}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0===(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},"0d2c":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("transition",{attrs:{name:"scale"}},[e.show?a("div",{staticClass:"case-detail"},[a("div",{staticClass:"case-detail-close"},[a("i",{staticClass:"icon-close",on:{click:e.closeCaseDetail}})]),a("div",{staticClass:"case-detail-box"},[a("div",{staticClass:"case-detail-priview",style:{"background-image":"url("+e.caseDetail.preview+")"}}),a("p",{staticClass:"case-detail-name"},[e._v(e._s(e.caseDetail.title))]),a("div",{staticClass:"case-detail-cell"},[a("p",{staticClass:"case-detail-tags"},[e.caseDetail.tags?a("span",[e._v(e._s(e.caseDetail.tags.split(" ").join("/")))]):e._e()]),a("div",{staticClass:"case-detail-handles"},[e.caseDetail.is_self?a("i",{staticClass:"icon-edit",on:{click:function(t){return e.editCase(e.caseDetail.id)}}}):e._e(),e.caseDetail.is_self?a("i",{staticClass:"icon-delete",on:{click:function(t){return e.deleteCase(e.caseDetail.id)}}}):e._e(),a("div",{staticClass:"case-detail-collection",on:{click:e.collectionCase}},[e.caseDetail.is_collection?a("i",{staticClass:"icon-collection_active"}):a("i",{staticClass:"icon-collection"})])])]),a("div",{staticClass:"case-detail-btn",on:{click:function(t){return e.againCreation(e.caseDetail.cont,e.caseDetail.id)}}},[a("touch-ripple",{attrs:{speed:2,opacity:.5}},[e._v("再创作")])],1)]),a("div",{staticClass:"goods-recommend"},[a("p",{staticClass:"goods-title"},[e._v("使用到的单品")]),e._l(e.caseDetail.goods,function(t){return a("div",{staticClass:"goods-body"},[a("div",{staticClass:"good-item",class:{"good-item--disabled":!t.is_buy},on:{click:function(a){return e.openGoodDetail(t)}}},[a("div",{staticClass:"good-img",style:{"background-image":"url("+t.original_img+"?imageslim&imageView2/0/w/560)"},attrs:{id:t.goods_id,source:"brandGoods",type:"good"}},[t.is_buy?e._e():a("div",{staticClass:"good-img--disabled"},[a("span",[e._v("失效")])]),a("div",{staticClass:"good-btns"},[a("div",{staticClass:"good-btn",on:{click:function(a){return a.stopPropagation(),e.replaceImage(t.original_img,t)}}},[e._v("替换")]),a("div",{staticClass:"good-btn",on:{click:function(a){return a.stopPropagation(),e.addImage(t.original_img,t)}}},[e._v("添加")])])]),a("div",{staticClass:"good-cell"},[a("div",{staticClass:"good-money-vip"},[a("em",[e._v("¥"+e._s(t.shop_price))]),a("span",[e._v("会员")])]),t.is_collection?a("i",{staticClass:"icon-collection_active",on:{click:function(a){return a.stopPropagation(),e.collectionGood(t)}}}):a("i",{staticClass:"icon-collection",on:{click:function(a){return a.stopPropagation(),e.collectionGood(t)}}})]),a("div",{staticClass:"good-money"},[a("span",[e._v("零售价")]),a("em",[e._v("¥"+e._s(t.market_price))])]),a("p",{staticClass:"good-name"},[e._v(e._s(t.goods_name))])])])})],2)]):e._e()])},i=[],n=(a("f763"),a("7364"),a("34a3"),a("d4d5"),a("4453"),a("089b")),r=a("e20c"),c=a("591a"),o=a("880a"),l=a("5428"),u=a.n(l),d={name:"caseDetail",data:function(){return{caseDetail:{goods:[]}}},watch:{id:function(e){e?this.getCaseDetail():this.caseDetail={goods:[]}}},methods:Object(r["a"])({},Object(c["b"])(["changeSkuDetail","changeCaseDetail","changeSketchGoods","showReplaceModal","showConfirmModal","updateHistory"]),{collectionGood:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var a,s,i,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,a=t.is_collection,s=t.goods_id,i=t.is_buy,i){e.next=4;break}return e.abrupt("return");case 4:if(!a){e.next=9;break}return e.next=7,this.$axios.get(o["unCollection"],{params:{goods_id:s}});case 7:e.next=11;break;case 9:return e.next=11,this.$axios.get(o["setCollection"],{params:{goods_id:s}});case 11:this.$set(t,"is_collection",!a),e.next=18;break;case 14:e.prev=14,e.t0=e["catch"](0),n=e.t0.msg,this.$toast.error(n);case 18:case"end":return e.stop()}},e,this,[[0,14]])}));function t(t){return e.apply(this,arguments)}return t}(),deleteCase:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var a,s,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,Number(this.$route.params.id)!==t||"edit"!==this.$route.query.type){e.next=4;break}return this.$toast.error("操作无法完成，当前方案在编辑中"),e.abrupt("return");case 4:return console.log(Number(this.$route.params.id)===t),e.next=7,this.showConfirmModal({title:"删除确认",paragraph:Number(this.$route.params.id)===t?"您确定要删除案例吗？删除后画板不会被清空":"确认要删除案例？",confirmButtonText:"确定"});case 7:if(a=e.sent,1!==a){e.next=15;break}return Number(this.$route.params.id)===t&&("edit"===this.$route.query.type&&(canvas.clear().renderAll(),this.changeSketchGoods({type:"clear"})),s=this.$route.query,delete s["type"],delete s["time_stamp"],this.$router.replace({name:this.$route.name,query:s})),e.next=12,this.$axios.post(o["sceneMaterials"],{id:t});case 12:this.$emit("delete"),this.closeCaseDetail(),this.$toast.success("删除成功！");case 15:e.next=21;break;case 17:e.prev=17,e.t0=e["catch"](0),i=e.t0.msg,this.$toast.error(i);case 21:case"end":return e.stop()}},e,this,[[0,17]])}));function t(t){return e.apply(this,arguments)}return t}(),editCase:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.replace.remind||!canvas.getActiveObject()){e.next=9;break}return e.next=3,this.showReplaceModal({title:"替换确认",paragraph:"将替换当前画布的全部内容"});case 3:if(a=e.sent,a){e.next=6;break}return e.abrupt("return");case 6:this.$router.replace({name:this.$route.name,params:{id:t},query:Object(r["a"])({type:"edit",time_stamp:(new Date).getTime()},this.$route.query)}),e.next=10;break;case 9:this.$router.replace({name:this.$route.name,params:{id:t},query:Object(r["a"])({type:"edit",time_stamp:(new Date).getTime()},this.$route.query)});case 10:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),collectionCase:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,t=this.caseDetail.is_collection,!t){e.next=7;break}return e.next=5,this.$axios.get(o["unCollectionCase"],{params:{id:this.id}});case 5:e.next=9;break;case 7:return e.next=9,this.$axios.get(o["collectionCase"],{params:{id:this.id}});case 9:this.caseDetail.is_collection=!t,e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](0),console.log(e.t0);case 15:case"end":return e.stop()}},e,this,[[0,12]])}));function t(){return e.apply(this,arguments)}return t}(),getCaseDetail:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t,a,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$axios.get(o["getSceneCaseDetail"],{params:{id:this.id}});case 3:t=e.sent,a=t.data,this.caseDetail=a,e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](0),s=e.t0.msg,this.$toast.error(s);case 12:case"end":return e.stop()}},e,this,[[0,8]])}));function t(){return e.apply(this,arguments)}return t}(),openGoodDetail:function(e){var t=e.goods_id,a=e.key,s=e.is_buy;s&&this.changeSkuDetail({show:!0,id:t,key:a,dataSource:"caseGoods"})},closeCaseDetail:function(){this.changeCaseDetail({show:!1,id:""})},againCreation:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t,a){var s,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(s=this.$route.query,delete s["type"],this.replace.remind||!canvas.getActiveObject()){e.next=11;break}return e.next=5,this.showReplaceModal({title:"替换确认",paragraph:"将替换当前画布的全部内容"});case 5:if(i=e.sent,i){e.next=8;break}return e.abrupt("return");case 8:this.$router.replace({name:this.$route.name,params:{id:a},query:Object(r["a"])({},s,{time_stamp:(new Date).getTime()})}),e.next=12;break;case 11:this.$router.replace({name:this.$route.name,params:{id:a},query:Object(r["a"])({},s,{time_stamp:(new Date).getTime()})});case 12:case"end":return e.stop()}},e,this)}));function t(t,a){return e.apply(this,arguments)}return t}(),replaceImage:function(e,t){var a=this;if(this.matrix.show)this.$toast.message("请先取消变形");else{var s=canvas.getActiveObjects();if(0!==s.length)if(s.length>1)this.$toast.message("只能替换单个商品");else if("i-text"!==s[0].type){var i=u()();canvas.getActiveObjects().forEach(function(e){e.goods_id&&a.changeSketchGoods({type:"remove",uid:e.uid}),canvas.remove(e)}),canvas.discardActiveObject().renderAll(),fabric.Image.fromURL(e+"?imageslim&imageView2/0/w/1000",function(e){var n=s[0].scaleX*s[0].width/e.width,c=Object(r["a"])({},s[0],{width:e.width,height:e.height,scaleX:n,scaleY:n,_element:e._element,_originalElement:e._originalElement,goods_id:t.goods_id,goods_key:t.key,uid:i});e.set(Object(r["a"])({},c)),canvas.add(e),canvas.setActiveObject(e),a.changeSketchGoods({type:"set",good:Object(r["a"])({},t,{uid:i})}),a.updateHistory()},{crossOrigin:"anonymous"})}else this.$toast.message("文本不能被替换");else this.$toast.message("请先选中被替换的单品")}},addImage:function(e,t){var a=this,s=u()();fabric.Image.fromURL(e+"?imageslim&imageView2/0/w/1000",function(e){e.set({goods_id:t.goods_id,goods_key:t.key,left:100,top:100,uid:s}),e.scaleToWidth(300),canvas.add(e),canvas.setActiveObject(e),a.changeSketchGoods({type:"set",good:Object(r["a"])({},t,{uid:s})}),a.updateHistory()},{crossOrigin:"anonymous"})}}),computed:Object(r["a"])({},Object(c["c"])({show:function(e){return e.sketch.caseDetail.show},id:function(e){return e.sketch.caseDetail.id},matrix:function(e){return e.sketch.matrix},replace:function(e){return e.modal.replace}}))},p=d,h=(a("f43b"),a("17cc")),m=Object(h["a"])(p,s,i,!1,null,"39169f6f",null);t["default"]=m.exports},"37ea":function(e,t,a){},3895:function(e,t,a){},4964:function(e,t,a){"use strict";function s(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}function i(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function n(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function r(e){return s(e)||i(e)||n()}a.d(t,"a",function(){return r})},5428:function(e,t,a){var s=a("05ba"),i=a("97c1");function n(e,t,a){var n=t&&a||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null),e=e||{};var r=e.random||(e.rng||s)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t)for(var c=0;c<16;++c)t[n+c]=r[c];return t||i(r)}e.exports=n},"5c4d":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"cases"},[a("div",{staticClass:"tabs"},e._l(e.tabs,function(t,s){return a("div",{staticClass:"tab",class:{active:e.activeTab===s},on:{click:function(t){return e.selectTab(s)}}},[a("span",[e._v(e._s(t.name))])])}),0),a("div",{staticClass:"filter"},[a("div",{staticClass:"select"},[a("div",{staticClass:"select-value",on:{click:function(t){return t.stopPropagation(),e.toggleSpaceSelect(t)}}},[e._v(e._s(e.selectedSpace||"选择空间"))]),a("transition",{attrs:{name:"expand"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.spaceSelect,expression:"spaceSelect"}],staticClass:"select-dropdown"},[a("div",{staticClass:"select-option",on:{click:function(t){return e.selectSpace("")}}},[e._v("全部")]),e._l(e.spaceList,function(t){return a("div",{staticClass:"select-option",class:{active:e.selectedSpace===t.name},on:{click:function(a){return e.selectSpace(t.name)}}},[e._v(e._s(t.name))])})],2)])],1),a("div",{staticClass:"select"},[a("div",{staticClass:"select-value",on:{click:function(t){return t.stopPropagation(),e.toggleStyleSelect(t)}}},[e._v(e._s(e.selectedStyle||"选择风格"))]),a("transition",{attrs:{name:"expand"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.styleSelect,expression:"styleSelect"}],staticClass:"select-dropdown"},[a("div",{staticClass:"select-option",on:{click:function(t){return e.selectStyle("")}}},[e._v("全部")]),e._l(e.styleList,function(t){return a("div",{staticClass:"select-option",class:{active:e.selectedStyle===t.name},on:{click:function(a){return e.selectStyle(t.name)}}},[e._v(e._s(t.name))])})],2)])],1)]),a("div",{staticClass:"cases-container"},[a("selected-case",{directives:[{name:"show",rawName:"v-show",value:0===e.activeTab,expression:"activeTab === 0"}],attrs:{selectedStyle:e.selectedStyle,selectedSpace:e.selectedSpace}}),a("my-cases",{directives:[{name:"show",rawName:"v-show",value:1===e.activeTab,expression:"activeTab === 1"}],ref:"myCase",attrs:{selectedStyle:e.selectedStyle,selectedSpace:e.selectedSpace}})],1),a("caseDetail",{on:{delete:e.deleteMyCase}})],1)},i=[],n=a("e20c"),r=a("63d7"),c=a("b1c2"),o=a("0d2c"),l=a("591a"),u={name:"cases",data:function(){return{tabs:[{name:"精选案例"},{name:"我的案例"}],activeTab:0,spaceSelect:!1,styleSelect:!1,selectedStyle:"",selectedSpace:""}},components:{selectedCase:r["default"],myCases:c["default"],caseDetail:o["default"]},methods:{deleteMyCase:function(){this.$refs.myCase.getSceneCaseList()},selectTab:function(e){this.activeTab=e},selectSpace:function(e){this.selectedSpace=e},selectStyle:function(e){this.selectedStyle=e},toggleSpaceSelect:function(){this.spaceSelect=!this.spaceSelect},toggleStyleSelect:function(){this.styleSelect=!this.styleSelect}},mounted:function(){var e=this;document.addEventListener("click",function(){e.spaceSelect=!1,e.styleSelect=!1})},computed:Object(n["a"])({},Object(l["c"])({styleList:function(e){return e.sketch.styleList},spaceList:function(e){return e.sketch.spaceList}}))},d=u,p=(a("d78b"),a("17cc")),h=Object(p["a"])(d,s,i,!1,null,"068a3674",null);t["default"]=h.exports},"610b":function(e,t,a){},"63d7":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("infinite-scroll",{staticClass:"cases-list",attrs:{loadMore:e.loadMore}},[e._l(e.caseData.ls,function(t){return s("div",{staticClass:"cases-item",on:{click:function(a){return a.stopPropagation(),e.openCaseDetail(t)}}},[s("div",{staticClass:"cases-item-img",style:{"background-image":"url("+t.preview+"?imageslim&imageView2/0/w/765)"}}),s("p",{staticClass:"cases-item-name"},[e._v(e._s(t.title))]),s("div",{staticClass:"cases-item-handles"},[s("div",{staticClass:"cases-item-btn",on:{click:function(a){return a.stopPropagation(),e.againCreation(t.cont,t.id)}}},[e._v("再创作")]),s("div",{staticClass:"cases-item-collection",on:{click:function(a){return a.stopPropagation(),e.collectionCase(t)}}},[t.is_collection?s("i",{staticClass:"icon-collection_active"}):s("i",{staticClass:"icon-collection"})])])])}),e.caseData.ls.length?e._e():s("div",{staticClass:"cases-list-info"},[s("img",{attrs:{src:a("d363")}}),s("div",{staticClass:"cases-list-info-txt"},[e._v("未找到相关案例")])])],2)},i=[],n=(a("7364"),a("4964")),r=(a("4453"),a("089b")),c=(a("34a3"),a("e20c")),o=a("591a"),l=a("880a"),u=a("fd88"),d={name:"selectedCases",props:{selectedStyle:String,selectedSpace:String},components:{infiniteScroll:u["a"]},data:function(){return{caseData:{ls:[]},isLoading:!1,isLoaded:!1}},watch:{selectedStyle:function(){this.getSceneCaseList()},selectedSpace:function(){this.getSceneCaseList()}},computed:Object(c["a"])({},Object(o["c"])({replace:function(e){return e.modal.replace}})),methods:Object(c["a"])({},Object(o["b"])(["showReplaceModal","changeCaseDetail","updateHistory"]),{openCaseDetail:function(e){var t=e.id;this.changeCaseDetail({show:!0,id:t})},collectionCase:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var a,s,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,a=t.is_collection,s=t.id,!a){e.next=7;break}return e.next=5,this.$axios.get(l["unCollectionCase"],{params:{id:s}});case 5:e.next=9;break;case 7:return e.next=9,this.$axios.get(l["collectionCase"],{params:{id:s}});case 9:this.$set(t,"is_collection",!a),e.next=16;break;case 12:e.prev=12,e.t0=e["catch"](0),i=e.t0.msg,this.$toast.error(i);case 16:case"end":return e.stop()}},e,this,[[0,12]])}));function t(t){return e.apply(this,arguments)}return t}(),loadMore:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,a,s,i,r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,!this.isLoading&&!this.isLoaded){e.next=3;break}return e.abrupt("return");case 3:return this.isLoading=!0,e.next=6,this.$axios.get(l["sceneCaseList"],{params:{page_code:this.caseData.page_code,style:this.selectedStyle,space:this.selectedSpace}});case 6:a=e.sent,s=a.data,(t=this.caseData.ls).push.apply(t,Object(n["a"])(s.ls)),this.caseData.page_code=s.page_code,s.ls.length||(this.isLoaded=!0),this.$nextTick(function(){r.isLoading=!1}),e.next=19;break;case 14:e.prev=14,e.t0=e["catch"](0),i=e.t0.msg,this.isLoading=!1,this.$toast.error(i);case 19:case"end":return e.stop()}},e,this,[[0,14]])}));function t(){return e.apply(this,arguments)}return t}(),getSceneCaseList:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,a,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$axios.get(l["sceneCaseList"],{params:{style:this.selectedStyle,space:this.selectedSpace}});case 3:t=e.sent,a=t.data,this.caseData=a,this.isLoaded=!1,e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](0),s=e.t0.msg,this.$toast.error(s);case 13:case"end":return e.stop()}},e,this,[[0,9]])}));function t(){return e.apply(this,arguments)}return t}(),againCreation:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,a){var s,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(s=this.$route.query,delete s["type"],this.replace.remind||!canvas.getActiveObject()){e.next=11;break}return e.next=5,this.showReplaceModal({title:"替换确认",paragraph:"将替换当前画布的全部内容"});case 5:if(i=e.sent,i){e.next=8;break}return e.abrupt("return");case 8:this.$router.replace({name:this.$route.name,params:{id:a},query:Object(c["a"])({},s,{time_stamp:(new Date).getTime()})}),e.next=12;break;case 11:this.$router.replace({name:this.$route.name,params:{id:a},query:Object(c["a"])({},s,{time_stamp:(new Date).getTime()})});case 12:case"end":return e.stop()}},e,this)}));function t(t,a){return e.apply(this,arguments)}return t}()}),created:function(){this.getSceneCaseList()}},p=d,h=(a("c987"),a("17cc")),m=Object(h["a"])(p,s,i,!1,null,"ddae96b8",null);t["default"]=m.exports},"97c1":function(e,t){for(var a=[],s=0;s<256;++s)a[s]=(s+256).toString(16).substr(1);function i(e,t){var s=t||0,i=a;return[i[e[s++]],i[e[s++]],i[e[s++]],i[e[s++]],"-",i[e[s++]],i[e[s++]],"-",i[e[s++]],i[e[s++]],"-",i[e[s++]],i[e[s++]],"-",i[e[s++]],i[e[s++]],i[e[s++]],i[e[s++]],i[e[s++]],i[e[s++]]].join("")}e.exports=i},a8a5:function(e,t,a){},b1c2:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("infinite-scroll",{staticClass:"cases-list",attrs:{loadMore:e.loadMore}},[e._l(e.caseData.ls,function(t,a){return s("div",{staticClass:"cases-item",on:{click:function(a){return a.stopPropagation(),e.openCaseDetail(t)}}},[s("div",{staticClass:"cases-item-img",style:{"background-image":"url("+t.preview+"?imageslim&imageView2/0/w/765)"}}),s("p",{staticClass:"cases-item-name"},[e._v(e._s(t.title))]),s("div",{staticClass:"cases-item-handles"},[s("div",{staticClass:"cases-item-btn",on:{click:function(a){return a.stopPropagation(),e.againCreation(t.cont,t.id)}}},[e._v("再创作")]),s("div",{staticClass:"cases-item-collection",on:{click:function(a){return a.stopPropagation(),e.collectionCase(t)}}},[t.is_collection?s("i",{staticClass:"icon-collection_active"}):s("i",{staticClass:"icon-collection"})])])])}),e.caseData.ls.length?e._e():s("div",{staticClass:"cases-list-info"},[s("img",{attrs:{src:a("d363")}}),s("div",{staticClass:"cases-list-info-txt"},[e._v("未找到相关案例")])])],2)},i=[],n=(a("7364"),a("d4d5"),a("4964")),r=(a("4453"),a("089b")),c=(a("34a3"),a("e20c")),o=a("880a"),l=a("fd88"),u=a("591a"),d={name:"myCases",props:{selectedStyle:String,selectedSpace:String},data:function(){return{caseData:{ls:[]},isLoading:!1,isLoaded:!1,casesList:[]}},watch:{$route:function(e,t){e.query.temporarySave&&e.query.temporarySave!==t.query.temporarySave&&this.getSceneCaseList()},selectedStyle:function(){this.getSceneCaseList()},selectedSpace:function(){this.getSceneCaseList()}},components:{infiniteScroll:l["a"]},computed:Object(c["a"])({},Object(u["c"])({replace:function(e){return e.modal.replace}})),methods:Object(c["a"])({},Object(u["b"])(["showConfirmModal","showReplaceModal","changeCaseDetail","updateHistory","changeSketchGoods"]),{openCaseDetail:function(e){var t=e.id;this.changeCaseDetail({show:!0,id:t})},collectionCase:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var a,s,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,a=t.is_collection,s=t.id,!a){e.next=7;break}return e.next=5,this.$axios.get(o["unCollectionCase"],{params:{id:s}});case 5:e.next=9;break;case 7:return e.next=9,this.$axios.get(o["collectionCase"],{params:{id:s}});case 9:this.$set(t,"is_collection",!a),e.next=16;break;case 12:e.prev=12,e.t0=e["catch"](0),i=e.t0.msg,this.$toast.error(i);case 16:case"end":return e.stop()}},e,this,[[0,12]])}));function t(t){return e.apply(this,arguments)}return t}(),loadMore:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,a,s,i,r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,!this.isLoading&&!this.isLoaded){e.next=3;break}return e.abrupt("return");case 3:return this.isLoading=!0,e.next=6,this.$axios.get(o["sceneCaseList"],{params:{page_code:this.caseData.page_code,my:1,style:this.selectedStyle,space:this.selectedSpace}});case 6:a=e.sent,s=a.data,(t=this.caseData.ls).push.apply(t,Object(n["a"])(s.ls)),this.caseData.page_code=s.page_code,s.ls.length||(this.isLoaded=!0),this.$nextTick(function(){r.isLoading=!1}),e.next=19;break;case 14:e.prev=14,e.t0=e["catch"](0),i=e.t0.msg,this.$toast.error(i),this.isLoading=!1;case 19:case"end":return e.stop()}},e,this,[[0,14]])}));function t(){return e.apply(this,arguments)}return t}(),getSceneCaseList:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,a,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$axios.get(o["sceneCaseList"],{params:{my:1,style:this.selectedStyle,space:this.selectedSpace}});case 3:t=e.sent,a=t.data,this.caseData=a,this.isLoaded=!1,e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](0),s=e.t0.msg,this.$toast.error(s);case 13:case"end":return e.stop()}},e,this,[[0,9]])}));function t(){return e.apply(this,arguments)}return t}(),deleteCase:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,a){var s,i,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,Number(this.$route.params.id)!==t||"edit"!==this.$route.params.type){e.next=4;break}return this.$toast.error("操作无法完成，当前方案在编辑中"),e.abrupt("return");case 4:return e.next=6,this.showConfirmModal({title:"删除确认",paragraph:"确认要删除案例？",confirmButtonText:"确定"});case 6:if(s=e.sent,1!==s){e.next=13;break}return Number(this.$route.params.id)===t&&("edit"===this.$route.query.type&&(canvas.clear().renderAll(),this.changeSketchGoods({type:"clear"})),i=this.$route.query,delete i["type"],delete i["time_stamp"],this.$router.replace({name:this.$route.name,query:i})),e.next=11,this.$axios.post(o["sceneMaterials"],{id:t});case 11:this.$toast.success("删除成功！"),this.caseData.ls.splice(a,1);case 13:e.next=19;break;case 15:e.prev=15,e.t0=e["catch"](0),n=e.t0.msg,this.$toast.error(n);case 19:case"end":return e.stop()}},e,this,[[0,15]])}));function t(t,a){return e.apply(this,arguments)}return t}(),againCreation:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,a){var s,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(s=this.$route.query,delete s["type"],this.replace.remind||!canvas.getActiveObject()){e.next=11;break}return e.next=5,this.showReplaceModal({title:"替换确认",paragraph:"将替换当前画布的全部内容"});case 5:if(i=e.sent,i){e.next=8;break}return e.abrupt("return");case 8:this.$router.replace({name:this.$route.name,params:{id:a},query:Object(c["a"])({},s,{time_stamp:(new Date).getTime()})}),e.next=12;break;case 11:this.$router.replace({name:this.$route.name,params:{id:a},query:Object(c["a"])({},s,{time_stamp:(new Date).getTime()})});case 12:case"end":return e.stop()}},e,this)}));function t(t,a){return e.apply(this,arguments)}return t}(),editCase:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.replace.remind||!canvas.getActiveObject()){e.next=9;break}return e.next=3,this.showReplaceModal({title:"替换确认",paragraph:"将替换当前画布的全部内容"});case 3:if(a=e.sent,a){e.next=6;break}return e.abrupt("return");case 6:this.$router.replace({name:this.$route.name,params:{id:t},query:Object(c["a"])({type:"edit",time_stamp:(new Date).getTime()},this.$route.query)}),e.next=10;break;case 9:this.$router.replace({name:this.$route.name,params:{id:t},query:Object(c["a"])({type:"edit",time_stamp:(new Date).getTime()},this.$route.query)});case 10:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()}),created:function(){this.getSceneCaseList()}},p=d,h=(a("bac0"),a("17cc")),m=Object(h["a"])(p,s,i,!1,null,"bb062aec",null);t["default"]=m.exports},b3e6:function(e,t,a){},bac0:function(e,t,a){"use strict";var s=a("b3e6"),i=a.n(s);i.a},c2f0:function(e,t,a){"use strict";var s=a("37ea"),i=a.n(s);i.a},c987:function(e,t,a){"use strict";var s=a("610b"),i=a.n(s);i.a},d363:function(e,t,a){e.exports=a.p+"static/img/search_img_notf_dis.097ce81b.png"},d78b:function(e,t,a){"use strict";var s=a("3895"),i=a.n(s);i.a},f43b:function(e,t,a){"use strict";var s=a("a8a5"),i=a.n(s);i.a},fd88:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"scroller",attrs:{id:"scroller"}},[e._t("default")],2)},i=[],n=(a("d4d5"),{name:"infiniteScroll",props:{distance:{type:Number,default:100},loadMore:{type:Function,required:!0}},methods:{initScroller:function(){var e=this,t=this.$refs.scroller;t.addEventListener("scroll",function(a){var s=t.scrollHeight,i=t.scrollTop,n=t.offsetHeight;s-i-n<100&&e.loadMore()})}},mounted:function(){this.initScroller()}}),r=n,c=(a("c2f0"),a("17cc")),o=Object(c["a"])(r,s,i,!1,null,"0355fe16",null);t["a"]=o.exports}}]);