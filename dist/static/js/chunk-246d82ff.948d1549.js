(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-246d82ff","chunk-ea875662"],{"0716":function(e,t,a){"use strict";var s=a("9ddb"),i=a.n(s);i.a},"09ed":function(e,t,a){},"0b2e":function(e,t,a){"use strict";var s=a("9377"),i=a.n(s);i.a},"0ce2":function(e,t,a){"use strict";var s=a("5ffa"),i=a.n(s);i.a},"0d2c":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("transition",{attrs:{name:"scale"}},[e.show?a("div",{staticClass:"case-detail"},[a("div",{staticClass:"case-detail-close"},[a("i",{staticClass:"icon-close",on:{click:e.closeCaseDetail}})]),a("div",{staticClass:"case-detail-box"},[a("div",{staticClass:"case-detail-priview",style:{"background-image":"url("+e.caseDetail.preview+")"}}),a("p",{staticClass:"case-detail-name"},[e._v(e._s(e.caseDetail.title))]),a("div",{staticClass:"case-detail-cell"},[a("p",{staticClass:"case-detail-tags"},[e.caseDetail.tags?a("span",[e._v(e._s(e.caseDetail.tags.split(" ").join("/")))]):e._e()]),a("div",{staticClass:"case-detail-handles"},[e.caseDetail.is_self?a("i",{staticClass:"icon-edit",on:{click:function(t){return e.editCase(e.caseDetail.id)}}}):e._e(),e.caseDetail.is_self?a("i",{staticClass:"icon-delete",on:{click:function(t){return e.deleteCase(e.caseDetail.id)}}}):e._e(),a("div",{staticClass:"case-detail-collection",on:{click:e.collectionCase}},[e.caseDetail.is_collection?a("i",{staticClass:"icon-collection_active"}):a("i",{staticClass:"icon-collection"})])])]),a("div",{staticClass:"case-detail-btn",on:{click:function(t){return e.againCreation(e.caseDetail.cont,e.caseDetail.id)}}},[a("touch-ripple",{attrs:{speed:2,opacity:.5}},[e._v("再创作")])],1)]),a("div",{staticClass:"goods-recommend"},[a("p",{staticClass:"goods-title"},[e._v("使用到的单品")]),e._l(e.caseDetail.goods,function(t){return a("div",{staticClass:"goods-body"},[a("div",{staticClass:"good-item",class:{"good-item--disabled":!t.is_buy},on:{click:function(a){return e.openGoodDetail(t)}}},[a("div",{staticClass:"good-img",style:{"background-image":"url("+t.original_img+"?imageslim&imageView2/0/w/560)"},attrs:{id:t.goods_id,source:"brandGoods",type:"good"}},[t.is_buy?e._e():a("div",{staticClass:"good-img--disabled"},[a("span",[e._v("失效")])]),a("div",{staticClass:"good-btns"},[a("div",{staticClass:"good-btn",on:{click:function(a){return a.stopPropagation(),e.replaceImage(t.original_img,t)}}},[e._v("替换")]),a("div",{staticClass:"good-btn",on:{click:function(a){return a.stopPropagation(),e.addImage(t.original_img,t)}}},[e._v("添加")])])]),a("div",{staticClass:"good-cell"},[a("div",{staticClass:"good-money-vip"},[a("em",[e._v("¥"+e._s(t.shop_price))]),a("span",[e._v("会员")])]),t.is_collection?a("i",{staticClass:"icon-collection_active",on:{click:function(a){return a.stopPropagation(),e.collectionGood(t)}}}):a("i",{staticClass:"icon-collection",on:{click:function(a){return a.stopPropagation(),e.collectionGood(t)}}})]),a("div",{staticClass:"good-money"},[a("span",[e._v("零售价")]),a("em",[e._v("¥"+e._s(t.market_price))])]),a("p",{staticClass:"good-name"},[e._v(e._s(t.goods_name))])])])})],2)]):e._e()])},i=[],n=(a("f763"),a("7364"),a("34a3"),a("d4d5"),a("4453"),a("089b")),c=a("e20c"),r=a("591a"),o=a("880a"),l=a("5428"),d=a.n(l),u={name:"caseDetail",data:function(){return{caseDetail:{goods:[]}}},watch:{id:function(e){e?this.getCaseDetail():this.caseDetail={goods:[]}}},methods:Object(c["a"])({},Object(r["b"])(["changeSkuDetail","changeCaseDetail","changeSketchGoods","showReplaceModal","showConfirmModal","updateHistory"]),{collectionGood:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var a,s,i,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,a=t.is_collection,s=t.goods_id,i=t.is_buy,i){e.next=4;break}return e.abrupt("return");case 4:if(!a){e.next=9;break}return e.next=7,this.$axios.get(o["unCollection"],{params:{goods_id:s}});case 7:e.next=11;break;case 9:return e.next=11,this.$axios.get(o["setCollection"],{params:{goods_id:s}});case 11:this.$set(t,"is_collection",!a),e.next=18;break;case 14:e.prev=14,e.t0=e["catch"](0),n=e.t0.msg,this.$toast.error(n);case 18:case"end":return e.stop()}},e,this,[[0,14]])}));function t(t){return e.apply(this,arguments)}return t}(),deleteCase:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var a,s,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,Number(this.$route.params.id)!==t||"edit"!==this.$route.query.type){e.next=4;break}return this.$toast.error("操作无法完成，当前方案在编辑中"),e.abrupt("return");case 4:return console.log(Number(this.$route.params.id)===t),e.next=7,this.showConfirmModal({title:"删除确认",paragraph:Number(this.$route.params.id)===t?"您确定要删除案例吗？删除后画板不会被清空":"确认要删除案例？",confirmButtonText:"确定"});case 7:if(a=e.sent,1!==a){e.next=15;break}return Number(this.$route.params.id)===t&&("edit"===this.$route.query.type&&(canvas.clear().renderAll(),this.changeSketchGoods({type:"clear"})),s=this.$route.query,delete s["type"],delete s["time_stamp"],this.$router.replace({name:this.$route.name,query:s})),e.next=12,this.$axios.post(o["sceneMaterials"],{id:t});case 12:this.$emit("delete"),this.closeCaseDetail(),this.$toast.success("删除成功！");case 15:e.next=21;break;case 17:e.prev=17,e.t0=e["catch"](0),i=e.t0.msg,this.$toast.error(i);case 21:case"end":return e.stop()}},e,this,[[0,17]])}));function t(t){return e.apply(this,arguments)}return t}(),editCase:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.replace.remind||!canvas.getActiveObject()){e.next=9;break}return e.next=3,this.showReplaceModal({title:"替换确认",paragraph:"将替换当前画布的全部内容"});case 3:if(a=e.sent,a){e.next=6;break}return e.abrupt("return");case 6:this.$router.replace({name:this.$route.name,params:{id:t},query:Object(c["a"])({type:"edit",time_stamp:(new Date).getTime()},this.$route.query)}),e.next=10;break;case 9:this.$router.replace({name:this.$route.name,params:{id:t},query:Object(c["a"])({type:"edit",time_stamp:(new Date).getTime()},this.$route.query)});case 10:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),collectionCase:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,t=this.caseDetail.is_collection,!t){e.next=7;break}return e.next=5,this.$axios.get(o["unCollectionCase"],{params:{id:this.id}});case 5:e.next=9;break;case 7:return e.next=9,this.$axios.get(o["collectionCase"],{params:{id:this.id}});case 9:this.caseDetail.is_collection=!t,e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](0),console.log(e.t0);case 15:case"end":return e.stop()}},e,this,[[0,12]])}));function t(){return e.apply(this,arguments)}return t}(),getCaseDetail:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t,a,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$axios.get(o["getSceneCaseDetail"],{params:{id:this.id}});case 3:t=e.sent,a=t.data,this.caseDetail=a,e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](0),s=e.t0.msg,this.$toast.error(s);case 12:case"end":return e.stop()}},e,this,[[0,8]])}));function t(){return e.apply(this,arguments)}return t}(),openGoodDetail:function(e){var t=e.goods_id,a=e.key,s=e.is_buy;s&&this.changeSkuDetail({show:!0,id:t,key:a,dataSource:"caseGoods"})},closeCaseDetail:function(){this.changeCaseDetail({show:!1,id:""})},againCreation:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t,a){var s,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(s=this.$route.query,delete s["type"],this.replace.remind||!canvas.getActiveObject()){e.next=11;break}return e.next=5,this.showReplaceModal({title:"替换确认",paragraph:"将替换当前画布的全部内容"});case 5:if(i=e.sent,i){e.next=8;break}return e.abrupt("return");case 8:this.$router.replace({name:this.$route.name,params:{id:a},query:Object(c["a"])({},s,{time_stamp:(new Date).getTime()})}),e.next=12;break;case 11:this.$router.replace({name:this.$route.name,params:{id:a},query:Object(c["a"])({},s,{time_stamp:(new Date).getTime()})});case 12:case"end":return e.stop()}},e,this)}));function t(t,a){return e.apply(this,arguments)}return t}(),replaceImage:function(e,t){var a=this;if(this.matrix.show)this.$toast.message("请先取消变形");else{var s=canvas.getActiveObjects();if(0!==s.length)if(s.length>1)this.$toast.message("只能替换单个商品");else if("i-text"!==s[0].type){var i=d()();canvas.getActiveObjects().forEach(function(e){e.goods_id&&a.changeSketchGoods({type:"remove",uid:e.uid}),canvas.remove(e)}),canvas.discardActiveObject().renderAll(),fabric.Image.fromURL(e+"?imageslim&imageView2/0/w/1000",function(e){var n=s[0].scaleX*s[0].width/e.width,r=Object(c["a"])({},s[0],{width:e.width,height:e.height,scaleX:n,scaleY:n,_element:e._element,_originalElement:e._originalElement,goods_id:t.goods_id,goods_key:t.key,uid:i});e.set(Object(c["a"])({},r)),canvas.add(e),canvas.setActiveObject(e),a.changeSketchGoods({type:"set",good:Object(c["a"])({},t,{uid:i})}),a.updateHistory()},{crossOrigin:"anonymous"})}else this.$toast.message("文本不能被替换");else this.$toast.message("请先选中被替换的单品")}},addImage:function(e,t){var a=this,s=d()();fabric.Image.fromURL(e+"?imageslim&imageView2/0/w/1000",function(e){e.set({goods_id:t.goods_id,goods_key:t.key,left:100,top:100,uid:s}),e.scaleToWidth(300),canvas.add(e),canvas.setActiveObject(e),a.changeSketchGoods({type:"set",good:Object(c["a"])({},t,{uid:s})}),a.updateHistory()},{crossOrigin:"anonymous"})}}),computed:Object(c["a"])({},Object(r["c"])({show:function(e){return e.sketch.caseDetail.show},id:function(e){return e.sketch.caseDetail.id},matrix:function(e){return e.sketch.matrix},replace:function(e){return e.modal.replace}}))},h=u,p=(a("f43b"),a("17cc")),m=Object(p["a"])(h,s,i,!1,null,"39169f6f",null);t["default"]=m.exports},"0e43":function(e,t,a){},"1cd6":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"index"},[a("div",{staticClass:"tabs"},e._l(e.tabs,function(t,s){return a("div",{staticClass:"tab",class:{active:e.activeTab===s},on:{click:function(t){return e.selectTab(s)}}},[e._v(e._s(t.name))])}),0),a("div",{staticClass:"index-container"},[a("assist",{directives:[{name:"show",rawName:"v-show",value:0===e.activeTab,expression:"activeTab === 0"}]}),a("material-store",{directives:[{name:"show",rawName:"v-show",value:1===e.activeTab,expression:"activeTab === 1"}]}),a("my-material",{directives:[{name:"show",rawName:"v-show",value:2===e.activeTab,expression:"activeTab === 2"}]})],1)])},i=[],n=a("1da1"),c=a("97c8"),r=a("c6c1"),o={name:"material",data:function(){return{tabs:[{name:"辅助效果"},{name:"素材库"},{name:"我的素材"}],activeTab:0}},methods:{selectTab:function(e){this.activeTab=e}},components:{assist:n["default"],materialStore:c["default"],myMaterial:r["default"]}},l=o,d=(a("ec25"),a("17cc")),u=Object(d["a"])(l,s,i,!1,null,"6387ee73",null);t["default"]=u.exports},"1d0b":function(e,t,a){e.exports=a.p+"static/img/dp_riyongpin.68c85fc9.png"},"1da1":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"assist"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.title,expression:"title"}],staticClass:"assist-back",on:{click:e.back}},[a("i",{staticClass:"icon-back-1"}),a("span",[e._v(e._s(e.title))])]),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.showBack,expression:"!showBack"}],staticClass:"assist-options"},[a("div",{staticClass:"assist-options-item",on:{click:e.addText}},[a("touch-ripple",{attrs:{speed:3,opacity:.6}},[a("div",{staticClass:"item-icon icon-text"}),a("div",{staticClass:"item-name"},[e._v("添加文本")])])],1),e._l(e.options,function(t){return a("div",{staticClass:"assist-options-item",on:{click:function(a){return e.selectOption(t)}}},[a("touch-ripple",{attrs:{speed:3,opacity:.6}},[a("div",{staticClass:"item-icon",class:t.icon}),a("div",{staticClass:"item-name"},[e._v(e._s(t.name))])])],1)})],2),a("div",{staticClass:"assist-contaienr"},[a("transition",{attrs:{name:"material"}},[e.showBack?a("infinite-scroll",{staticClass:"assist-list",attrs:{loadMore:e.loadMore}},e._l(e.assists,function(t){return a("div",{staticClass:"assist-item",class:{"light-item":t.border_color},style:{"background-color":t.background,"border-color":t.border_color},on:{click:function(a){return e.addMaterial(t.img,t)}}},[a("div",{staticClass:"assist-item-img",style:{"background-image":"url("+t.img+"?imageslim&imageView2/0/w/268)"}})])}),0):e._e()],1)],1)])},i=[],n=a("4964"),c=(a("7364"),a("4453"),a("089b")),r=a("e20c"),o=a("880a"),l=a("5428"),d=a.n(l),u=a("591a"),h=a("fd88"),p={name:"assist",data:function(){return{showBack:!1,lightShow:!1,title:"",selectId:null,assists:[],isLoading:!1,isLoaded:!1,pageCode:0,options:[]}},components:{infiniteScroll:h["a"]},methods:Object(r["a"])({},Object(u["b"])(["updateHistory"]),{init:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t,a,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$axios.get(o["getClassify"]);case 3:t=e.sent,a=t.data,this.options=a.lower,e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](0),s=e.t0.msg,this.$toast.error(s);case 12:case"end":return e.stop()}},e,this,[[0,8]])}));function t(){return e.apply(this,arguments)}return t}(),selectOption:function(e){this.showBack=!0,this.assists=[],this.selectId=e.id,this.title=e.name,this.getMaterial()},getMaterial:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t,a,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$axios.get(o["classifyMaterial"],{params:{id:this.selectId,page_size:28}});case 3:t=e.sent,a=t.data,this.pageCode=a.page_code,this.assists=a.ls,e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](0),s=e.t0.msg,this.$toast.error(s);case 13:case"end":return e.stop()}},e,this,[[0,9]])}));function t(){return e.apply(this,arguments)}return t}(),back:function(){this.title="",this.showBack=!1},addText:function(){var e=d()(),t=new fabric.IText("双击修改文字",{left:100,top:100,cornerSize:20,padding:5,fill:"rgba(0, 0, 0, 1)",uid:e});canvas.add(t),canvas.setActiveObject(t)},addMaterial:function(e,t){var a=this,s=d()();fabric.Image.fromURL(e+"?imageslim&imageView2/0/w/1000",function(e){e.set({id:t.id,left:100,top:100,uid:s}),e.scaleToWidth(300),canvas.add(e),canvas.setActiveObject(e),a.updateHistory()},{crossOrigin:"anonymous"})},loadMore:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t,a,s,i,c=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,!this.isLoading&&!this.isLoaded){e.next=3;break}return e.abrupt("return");case 3:return this.isLoading=!0,e.next=6,this.$axios.get(o["classifyMaterial"],{params:{id:this.selectId,page_code:this.pageCode,page_size:28}});case 6:a=e.sent,s=a.data,this.pageCode=s.page_code,(t=this.assists).push.apply(t,Object(n["a"])(s.ls)),s.ls.length||(this.isLoaded=!0),this.$nextTick(function(){c.isLoading=!1}),e.next=18;break;case 14:e.prev=14,e.t0=e["catch"](0),i=e.t0.msg,this.$toast.error(i);case 18:case"end":return e.stop()}},e,this,[[0,14]])}));function t(){return e.apply(this,arguments)}return t}()}),created:function(){this.init()}},m=p,v=(a("0ce2"),a("17cc")),g=Object(v["a"])(m,s,i,!1,null,"30046279",null);t["default"]=g.exports},"1e8b":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("infinite-scroll",{staticClass:"cases-list",attrs:{loadMore:e.loadMore}},[e._l(e.caseData.ls,function(t){return a("div",{staticClass:"cases-item",on:{click:function(a){return a.stopPropagation(),e.openCaseDetail(t)}}},[a("div",{staticClass:"cases-item-img",style:{"background-image":"url("+t.preview+"?imageslim&imageView2/0/w/765)"}}),a("p",{staticClass:"cases-item-name"},[e._v(e._s(t.title))]),a("div",{staticClass:"cases-item-handles"},[a("div",{staticClass:"cases-item-btn",on:{click:function(a){return a.stopPropagation(),e.againCreation(t.cont,t.id)}}},[e._v("再创作")]),a("div",{staticClass:"cases-item-collection",on:{click:function(a){return a.stopPropagation(),e.collectionCase(t)}}},[t.is_collection?a("i",{staticClass:"icon-collection_active"}):a("i",{staticClass:"icon-collection"})])])])}),e.caseData.ls.length?e._e():a("div",{staticClass:"case-list-info"},[e._v("暂无收藏的案例")])],2)},i=[],n=(a("7364"),a("4964")),c=(a("4453"),a("089b")),r=(a("34a3"),a("e20c")),o=a("591a"),l=a("880a"),d=a("fd88"),u={name:"selectedCases",components:{infiniteScroll:d["a"]},data:function(){return{caseData:{ls:[]},isLoading:!1,collectionStatus:!1,isLoaded:!1}},computed:Object(r["a"])({},Object(o["c"])({replace:function(e){return e.modal.replace}})),methods:Object(r["a"])({},Object(o["b"])(["showReplaceModal","changeCaseDetail","updateHistory"]),{openCaseDetail:function(e){var t=e.id;this.changeCaseDetail({show:!0,id:t})},collectionCase:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t){var a,s,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,!this.collectionStatus){e.next=3;break}return e.abrupt("return");case 3:if(this.collectionStatus=!0,a=t.is_collection,s=t.id,!a){e.next=10;break}return e.next=8,this.$axios.get(l["unCollectionCase"],{params:{id:s}});case 8:e.next=12;break;case 10:return e.next=12,this.$axios.get(l["collectionCase"],{params:{id:s}});case 12:this.$set(t,"is_collection",!a),this.getSceneCaseList(),e.next=20;break;case 16:e.prev=16,e.t0=e["catch"](0),i=e.t0.msg,this.$toast.error(i);case 20:case"end":return e.stop()}},e,this,[[0,16]])}));function t(t){return e.apply(this,arguments)}return t}(),loadMore:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t,a,s,i,c=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,!this.isLoading&&!this.isLoaded){e.next=3;break}return e.abrupt("return");case 3:return this.isLoading=!0,e.next=6,this.$axios.get(l["sceneCaseList"],{params:{is_collection:1,page_code:this.caseData.page_code}});case 6:a=e.sent,s=a.data,(t=this.caseData.ls).push.apply(t,Object(n["a"])(s.ls)),this.caseData.page_code=s.page_code,s.ls.length||(this.isLoaded=!0),this.$nextTick(function(){c.isLoading=!1}),e.next=19;break;case 14:e.prev=14,e.t0=e["catch"](0),i=e.t0.msg,this.isLoading=!1,this.$toast.error(i);case 19:case"end":return e.stop()}},e,this,[[0,14]])}));function t(){return e.apply(this,arguments)}return t}(),getSceneCaseList:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t,a,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$axios.get(l["sceneCaseList"],{params:{is_collection:1}});case 3:t=e.sent,a=t.data,this.caseData=a,this.isLoaded=!1,this.collectionStatus=!1,e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](0),s=e.t0.msg,this.$toast.error(s);case 14:case"end":return e.stop()}},e,this,[[0,10]])}));function t(){return e.apply(this,arguments)}return t}(),againCreation:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t,a){var s,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(s=this.$route.query,delete s["type"],this.replace.remind||!canvas.getActiveObject()){e.next=11;break}return e.next=5,this.showReplaceModal({title:"替换确认",paragraph:"将替换当前画布的全部内容"});case 5:if(i=e.sent,i){e.next=8;break}return e.abrupt("return");case 8:this.$router.replace({name:this.$route.name,params:{id:a},query:Object(r["a"])({},s,{time_stamp:(new Date).getTime()})}),e.next=12;break;case 11:this.$router.replace({name:this.$route.name,params:{id:a},query:Object(r["a"])({},s,{time_stamp:(new Date).getTime()})});case 12:case"end":return e.stop()}},e,this)}));function t(t,a){return e.apply(this,arguments)}return t}()}),created:function(){this.getSceneCaseList()}},h=u,p=(a("e880"),a("17cc")),m=Object(p["a"])(h,s,i,!1,null,"b380e952",null);t["default"]=m.exports},"2ad4":function(e,t,a){},"31d0":function(e,t,a){e.exports=a.p+"static/img/dp_buyijiafang.ea60dbcb.png"},3895:function(e,t,a){},"3b3a":function(e,t,a){e.exports=a.p+"static/img/dp_denghi.ec49d182.png"},"3e51":function(e,t,a){},"42b8":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"material"},[a("c-button",{attrs:{type:"primary"},on:{click:e.showUploadQrcode}},[e._v("微信扫码上传素材")]),a("div",{staticClass:"material-list"},e._l(e.list,function(t){return t.uploaded?a("div",{staticClass:"material-body"},[a("div",{staticClass:"material-item"},[a("div",{staticClass:"material-item-img",style:{"background-image":"url("+t.img+")"}}),a("div",{staticClass:"material-item-handle"},[a("div",{staticClass:"material-item-info"},[e._v("点击添加到画布…")]),a("div",{staticClass:"material-item-save",class:{disabled:t.isSave},on:{click:function(a){return e.save(t)}}},[e._v("保存")])]),a("div",{staticClass:"material-item-btns"},[a("div",{staticClass:"material-item-btn",on:{click:function(a){return e.replaceImage(t.src)}}},[e._v("替换")]),a("div",{staticClass:"material-item-btn",on:{click:function(a){return e.addImage(t.src)}}},[e._v("添加")])])])]):e._e()}),0),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showUpload,expression:"showUpload"}],ref:"upload",staticClass:"material-upload"})],1)},i=[],n=(a("e680"),a("3c6b"),a("7bc1"),a("f763"),a("4453"),a("089b")),c=a("e20c"),r=a("591a"),o=a("880a"),l=a("1638"),d=a("5428"),u=a.n(d),h=a("fd9e"),p={name:"uploadMaterial",data:function(){return{keyword:"",list:[],showUpload:!1,listIndex:0,uploaded:!1}},watch:{confirm:function(e){e&&this.getUploadedImages()}},methods:Object(c["a"])({},Object(r["b"])(["changeUploadedMaterial","changeUploadQrcode","updateHistory"]),{save:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var a,s,i,n,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,a=t.src,s=t.isSave,i=void 0!==s&&s,!i){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,this.$axios.get(o["addMaterial"],{params:{img:a}});case 6:n=e.sent,n.data,this.$set(t,"isSave",!0),e.next=15;break;case 11:e.prev=11,e.t0=e["catch"](0),c=e.t0.msg,this.$toast.error(c);case 15:case"end":return e.stop()}},e,this,[[0,11]])}));function t(t){return e.apply(this,arguments)}return t}(),getUploadedImages:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t,a,s,i=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$axios.get(o["uploadedImages"]);case 3:t=e.sent,a=t.data,this.changeUploadedMaterial({show:!1,confirm:!1}),this.uploaded=!1,a.forEach(function(e){e.uploaded=!1,i.list.push(e)}),this.nextUpload(),e.next=15;break;case 11:e.prev=11,e.t0=e["catch"](0),s=e.t0.msg,this.$toast.error(s);case 15:case"end":return e.stop()}},e,this,[[0,11]])}));function t(){return e.apply(this,arguments)}return t}(),nextUpload:function(){try{var e=window.android.getImageBase64Encode(this.list[this.listIndex].img),t=this.dataURLtoBlob(e);this.up.addFile(t),this.up.start()}catch(a){console.log("nextUpload"+a)}},dataURLtoBlob:function(e){var t=e.split(","),a=t[0].match(/:(.*?);/)[1],s=atob(t[1]),i=s.length,n=new Uint8Array(i);while(i--)n[i]=s.charCodeAt(i);return new Blob([n],{type:a})},upload:function(){var e=this;if(this.up)return!1;var t={browse_button:this.$refs.upload,multi_selection:!1,max_file_size:"20mb"};this.up=new l["a"](t),this.up.bind("FileUploaded",function(t,a,s){e.list[e.listIndex].src="".concat(t.domain).concat(JSON.parse(s.response||s).key),e.list[e.listIndex].uploaded=!0,e.listIndex<e.list.length&&(e.listIndex+=1,e.nextUpload())}),this.up.init()},showUploadQrcode:function(){this.changeUploadQrcode({show:!0})},replaceImage:function(e){var t=this,a=canvas.getActiveObjects();if(0!==a.length)if(a.length>1)this.$toast.message("只能替换单个素材");else{var s=u()();canvas.getActiveObjects().forEach(function(e){canvas.remove(e)}),canvas.discardActiveObject().renderAll(),h["a"].Image.fromURL(e+"?imageslim&imageView2/0/w/1000",function(e){var i=a[0].scaleX*a[0].width/e.width;e.set(Object(c["a"])({},a[0],{width:e.width,height:e.height,scaleX:i,scaleY:i,_element:e._element,_originalElement:e._originalElement,uid:s})),canvas.add(e),canvas.setActiveObject(e),t.updateHistory()},{crossOrigin:"anonymous"})}else this.$toast.message("请先选中被替换的素材")},addImage:function(e){var t=this;console.log(e);var a=u()();h["a"].Image.fromURL(e+"?imageslim&imageView2/0/w/1000",function(e){e.set({uid:a}),canvas.add(e),canvas.setActiveObject(e),t.updateHistory()},{crossOrigin:"anonymous"})}}),mounted:function(){this.upload()},computed:Object(c["a"])({},Object(r["c"])({confirm:function(e){return e.modal.uploadedMaterial.confirm}}))},m=p,v=(a("94b8"),a("17cc")),g=Object(v["a"])(m,s,i,!1,null,"5d5edb48",null);t["default"]=g.exports},"4b32":function(e,t){e.exports="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAASABIAAD/4QBMRXhpZgAATU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAFKADAAQAAAABAAAAFAAAAAD/7QA4UGhvdG9zaG9wIDMuMAA4QklNBAQAAAAAAAA4QklNBCUAAAAAABDUHYzZjwCyBOmACZjs+EJ+/8AAEQgAFAAUAwERAAIRAQMRAf/EAB8AAAEFAQEBAQEBAAAAAAAAAAABAgMEBQYHCAkKC//EALUQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+v/EAB8BAAMBAQEBAQEBAQEAAAAAAAABAgMEBQYHCAkKC//EALURAAIBAgQEAwQHBQQEAAECdwABAgMRBAUhMQYSQVEHYXETIjKBCBRCkaGxwQkjM1LwFWJy0QoWJDThJfEXGBkaJicoKSo1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoKDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uLj5OXm5+jp6vLz9PX29/j5+v/bAEMAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/bAEMBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/dAAQAA//aAAwDAQACEQMRAD8A+N/+CTH/AASYuv8Agq7dftF319+0XcfBa9+C1x8Lrq7vLr4XSfFe68aXXxXk+Jk1xc3NxN8Tfh/LpVxpUvw/eWaaV9ak1eTWmd2sWsSb8A/ZD/iEc/6yB/8AmqP/AOUrQB/Hro3jTxj4ctZLHw94s8TaDZS3D3Utno2u6rpdrJdPHFC9zJb2N3bxPcPFBDE8zIZGjhiQsVRAoB//0Psj/g0b/wCcgn/dqX/vydAH9mFAH+M/QB//0f5vfGmjWvhzxj4s8PWMlxLZaD4m13RrSW6eOS6ktdL1S6sbeS5eGKCJ7h4oEaZ4oIY2kLFIo1IRQDmaAPrz4A/AHwd8VPB2peIfEOpeJrO9s/E15o0UWjXulW1q1rb6Xo18kkiX2jajKbgy6jMrus6RmNYgIlZXdwD/2Q=="},"4ee8":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("aside",{staticClass:"sketch-aside"},[a("nav",{staticClass:"sketch-aside-nav"},[a("div",{staticClass:"nav-item",class:{active:0===e.currentNav},on:{click:function(t){return e.changeNavbar(0)}}},[a("touch-ripple",{attrs:{speed:3,opacity:.6}},[a("i",{staticClass:"icon-search-1"}),a("p",[e._v("商品")])])],1),a("div",{staticClass:"nav-item",class:{active:5===e.currentNav},on:{click:function(t){return e.changeNavbar(5)}}},[a("touch-ripple",{attrs:{speed:3,opacity:.6}},[a("i",{staticClass:"icon-brand"}),a("p",[e._v("品牌")])])],1),a("div",{staticClass:"nav-item",class:{active:1===e.currentNav},on:{click:function(t){return e.changeNavbar(1)}}},[a("touch-ripple",{attrs:{speed:3,opacity:.6}},[a("i",{staticClass:"icon-case"}),a("p",[e._v("案例")])])],1),a("div",{staticClass:"nav-item",class:{active:2===e.currentNav},on:{click:function(t){return e.changeNavbar(2)}}},[a("touch-ripple",{attrs:{speed:3,opacity:.6}},[a("i",{staticClass:"icon-material"}),a("p",[e._v("素材")])])],1),a("div",{staticClass:"nav-item",class:{active:3===e.currentNav},on:{click:function(t){return e.changeNavbar(3)}}},[a("touch-ripple",{attrs:{speed:3,opacity:.6}},[a("i",{staticClass:"icon-collection"}),a("p",[e._v("收藏")])])],1),a("div",{staticClass:"nav-item",class:{active:4===e.currentNav},on:{click:function(t){return e.changeNavbar(4)}}},[a("touch-ripple",{attrs:{speed:3,opacity:.6}},[a("i",{staticClass:"icon-upload"}),a("p",[e._v("上传素材")])])],1)]),a("main",{staticClass:"sketch-aside-container"},[a("transition",{attrs:{name:"side"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.sideShow,expression:"sideShow"}],staticClass:"sketch-aside-box"},[a("div",{staticClass:"sketch-aside-inner"},[a("sketch-goods",{directives:[{name:"show",rawName:"v-show",value:0===e.currentNav,expression:"currentNav === 0"}],on:{addGood:e.addGood}}),a("sketch-cases",{directives:[{name:"show",rawName:"v-show",value:1===e.currentNav,expression:"currentNav === 1"}]},[e._v("案例")]),2===e.currentNav?a("sketch-material",[e._v("素材")]):e._e(),3===e.currentNav?a("sketch-collection",[e._v("收藏")]):e._e(),a("upload-material",{directives:[{name:"show",rawName:"v-show",value:4===e.currentNav,expression:"currentNav === 4"}]},[e._v("上传素材")]),5===e.currentNav?a("brand-list",[e._v("品牌")]):e._e()],1)])]),a("div",{staticClass:"sketch-aside-switch",on:{click:e.toggleSide}},[a("i",{staticClass:"icon-left",style:{transform:e.sideShow?"":"rotate(180deg)"}})])],1)])},i=[],n=a("e20c"),c=(a("d4d5"),a("5caa")),r=a("5c4d"),o=a("1cd6"),l=a("a01d"),d=a("542e"),u=a("42b8"),h=a("591a"),p={name:"sketchSlider",props:{parentCurrentNav:Number},data:function(){return{sideShow:!0,currentNav:0}},watch:{skuDetailShow:function(e){e&&(this.currentNav=0,this.sideShow=!0)},caseDetailShow:function(e){e&&(this.currentNav=1,this.sideShow=!0)},parentCurrentNav:function(e){this.currentNav=e}},methods:{changeNavbar:function(e){this.sideShow=!0,this.currentNav=e},addGood:function(e){this.$emit("addGood",e)},toggleSide:function(){this.sideShow=!this.sideShow,this.$emit("toggleSlide",this.sideShow)}},computed:Object(n["a"])({},Object(h["c"])({skuDetailShow:function(e){return e.sketch.skuDetail.show},caseDetailShow:function(e){return e.sketch.caseDetail.show}})),components:{sketchGoods:c["default"],sketchCases:r["default"],sketchMaterial:o["default"],sketchCollection:l["default"],uploadMaterial:u["default"],brandList:d["default"]}},m=p,v=(a("f935"),a("17cc")),g=Object(v["a"])(m,s,i,!1,null,"aaeda534",null);t["default"]=g.exports},"542e":function(e,t,a){"use strict";a.r(t);var s,i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.showDetail?s("div",{staticClass:"brand-detail"},[s("brand-detail",{attrs:{brandId:e.brandId},on:{closeBrandDetail:e.closeBrandDetail}})],1):s("div",{staticClass:"brand"},[s("div",{staticClass:"sketch-brand-header"},[s("div",{staticClass:"search"},[s("div",{staticClass:"search-icon icon-search"}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.keyword,expression:"keyword"}],staticClass:"search-input",attrs:{placeholder:"请输入搜索内容"},domProps:{value:e.keyword},on:{input:function(t){t.target.composing||(e.keyword=t.target.value)}}}),e.keyword?s("div",{staticClass:"search-clear",on:{click:e.clearKeyword}},[s("div",{staticClass:"icon-close"})]):e._e()])]),s("div",{staticClass:"brand-container"},[s("div",{staticClass:"brand-screen"},[s("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleStyleClose,expression:"handleStyleClose"}],staticClass:"brand-screen-select",on:{click:function(t){return e.showSelect("showStyle","showSpace","style",t)}}},[e._v(e._s(e.styleActive.name?e.styleActive.name:"选择风格")),s("div",{directives:[{name:"show",rawName:"v-show",value:e.showStyle,expression:"showStyle"}],ref:"style",staticClass:"brand-screen-downdrop"},[s("div",{staticClass:"select-item",class:{"select-item-active":!e.styleActive.id},on:{click:function(t){return t.stopPropagation(),e.selectItem("styleActive",{name:"全部",id:""},"showStyle")}}},[s("span",[e._v("全部")]),s("i",{directives:[{name:"show",rawName:"v-show",value:!e.styleActive.id,expression:"!styleActive.id"}],staticClass:"iconfont icon-selected"})]),e._l(e.styleList,function(t){return s("div",{staticClass:"select-item",class:{"select-item-active":e.styleActive.id===t.id},on:{click:function(a){return a.stopPropagation(),e.selectItem("styleActive",t,"showStyle")}}},[s("span",[e._v(e._s(t.name))]),s("i",{directives:[{name:"show",rawName:"v-show",value:e.styleActive.id===t.id,expression:"styleActive.id === item.id"}],staticClass:"iconfont icon-selected"})])})],2)]),s("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleSpaceClose,expression:"handleSpaceClose"}],staticClass:"brand-screen-select",on:{click:function(t){return e.showSelect("showSpace","showStyle","space",t)}}},[e._v(e._s(e.spaceActive.name?e.spaceActive.name:"选择品类")),s("div",{directives:[{name:"show",rawName:"v-show",value:e.showSpace,expression:"showSpace"}],ref:"space",staticClass:"brand-screen-downdrop"},[s("div",{staticClass:"select-item",class:{"select-item-active":!e.spaceActive.id},on:{click:function(t){return t.stopPropagation(),e.selectItem("spaceActive",{name:"全部",id:""},"showSpace")}}},[s("span",[e._v("全部")]),s("i",{directives:[{name:"show",rawName:"v-show",value:!e.spaceActive.id,expression:"!spaceActive.id"}],staticClass:"iconfont icon-selected"})]),e._l(e.spaceList,function(t){return s("div",{staticClass:"select-item",class:{"select-item-active":e.spaceActive.id===t.id},on:{click:function(a){return a.stopPropagation(),e.selectItem("spaceActive",t,"showSpace")}}},[s("span",[e._v(e._s(t.name))]),s("i",{directives:[{name:"show",rawName:"v-show",value:e.spaceActive.id===t.id,expression:"spaceActive.id === item.id"}],staticClass:"iconfont icon-selected"})])})],2)])]),e.brandList.length?s("infinite-scroll",{ref:"brandList",staticClass:"brand-list",attrs:{loadMore:e.loadMore}},[s("div",{staticClass:"brand-list-title"},[e._v("所有品牌")]),s("div",{staticClass:"brand-list-content"},e._l(e.brandList,function(t){return s("div",{staticClass:"brand-logo-item",style:{"background-image":"url("+t.logo+"?imageslim&imageView2/0/w/200)"},on:{click:function(a){return e.selectBrand(t)}}})}),0)]):s("div",{staticClass:"brand-list-info"},[s("img",{attrs:{src:a("d363")}}),s("div",{staticClass:"brand-list-info-text"},[e._v("未找到相关商品")])])],1)])},n=[],c=a("4964"),r=(a("4453"),a("089b")),o=(a("7364"),a("e20c")),l=a("cb1d"),d=a("591a"),u=a("880a"),h=a("fd88"),p=a("e814"),m={name:"brand",data:function(){return{showDetail:!1,brandId:"",form:Object(l["a"])({style:""},"style",""),styleActive:{id:-1,name:""},spaceActive:{id:-1,name:""},brandList:[],showStyle:!1,showSpace:!1,keyword:"",page:1,spaceList:[],pageSize:15,isLoading:!1,isLoaded:!1,styleKeyword:"",catId:""}},watch:{keyword:function(e){var t=this;clearTimeout(s),s=setTimeout(function(){t.page=1,t.getBrandList()},300)}},components:{infiniteScroll:h["a"],brandDetail:p["default"]},computed:Object(o["a"])({},Object(d["c"])({styleList:function(e){return e.sketch.styleList}}),{goodListShow:function(){var e=this.$route.query,t=e.style_words,a=void 0===t?"":t,s=e.space_words,i=void 0===s?"":s,n=e.first_id,c=void 0===n?"":n;return!!(this.keyword||a||i||c)}}),directives:{clickoutside:{bind:function(e,t,a){function s(a){if(e.contains(a.target))return!1;t.expression&&t.value(a)}e._vueClickOutside_=s,document.addEventListener("click",s)},unbind:function(e,t){document.removeEventListener("click",e._vueClickOutside_),delete e._vueClickOutside_}}},methods:Object(o["a"])({},Object(d["b"])(["changeBrandScreening"]),{closeBrandDetail:function(){this.showDetail=!1},handleStyleClose:function(){this.showStyle=!1},handleSpaceClose:function(){this.showSpace=!1},showSelect:function(e,t,a,s){s.target!==this.$refs[a]&&(this[e]=!1,this[t]=!1),this[e]=!0,this[t]=!1},selectBrand:function(e){this.brandId=e.id,this.changeBrandScreening({show:!1,search_words:"",brandId:"",first_id:"",second_id:"",three_id:"",category_id:""}),this.showDetail=!0},selectItem:function(e,t,a){var s=t.name,i=void 0===s?"":s,n=t.id,c=void 0===n?"":n;this[e].id=c,this[e].name=i,this[a]=!1,"styleActive"===e?this.styleKeyword="全部"===this[e].name?"":this[e].name:this.catId=this[e].id,this.page=1,this.getBrandList()},loadMore:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,a,s,i,n=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,!this.isLoading&&!this.isLoaded){e.next=3;break}return e.abrupt("return");case 3:return this.isLoading=!0,e.next=6,this.$axios.get(u["getBrandList"],{params:{page:this.page,page_size:this.pageSize,keyword:this.keyword,style:this.styleKeyword,cat_id:this.catId}});case 6:a=e.sent,s=a.data,(t=this.brandList).push.apply(t,Object(c["a"])(s.list)),this.page+=1,s.list.length||(this.isLoaded=!0),this.$nextTick(function(){n.isLoading=!1}),e.next=19;break;case 14:e.prev=14,e.t0=e["catch"](0),i=e.t0.msg,this.isLoading=!1,this.$toast.error(i);case 19:case"end":return e.stop()}},e,this,[[0,14]])}));function t(){return e.apply(this,arguments)}return t}(),getBrandList:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$axios.get(u["getBrandList"],{params:{page:this.page,page_size:this.pageSize,keyword:this.keyword,style:this.styleKeyword,cat_id:this.catId}});case 3:t=e.sent,a=t.data,this.isLoading=!1,this.isLoaded=!1,this.page+=1,this.brandList=a.list,e.next=15;break;case 11:e.prev=11,e.t0=e["catch"](0),console.log(e.t0),this.$toast.error(msg);case 15:case"end":return e.stop()}},e,this,[[0,11]])}));function t(){return e.apply(this,arguments)}return t}(),getCategoryList:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$axios.get(u["getCategoryList"],{params:{parent_id:0}});case 3:t=e.sent,a=t.data,this.spaceList=a.ls,e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),this.$toast.error(msg);case 11:case"end":return e.stop()}},e,this,[[0,8]])}));function t(){return e.apply(this,arguments)}return t}(),clearKeyword:function(){this.keyword=""}}),created:function(){this.changeBrandScreening({show:!1,search_words:"",brandId:"",first_id:"",second_id:"",three_id:"",category_id:""}),this.getCategoryList(),this.getBrandList()}},v=m,g=(a("be85"),a("17cc")),f=Object(g["a"])(v,i,n,!1,null,"0a91a8ca",null);t["default"]=f.exports},"5c4d":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"cases"},[a("div",{staticClass:"tabs"},e._l(e.tabs,function(t,s){return a("div",{staticClass:"tab",class:{active:e.activeTab===s},on:{click:function(t){return e.selectTab(s)}}},[a("span",[e._v(e._s(t.name))])])}),0),a("div",{staticClass:"filter"},[a("div",{staticClass:"select"},[a("div",{staticClass:"select-value",on:{click:function(t){return t.stopPropagation(),e.toggleSpaceSelect(t)}}},[e._v(e._s(e.selectedSpace||"选择空间"))]),a("transition",{attrs:{name:"expand"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.spaceSelect,expression:"spaceSelect"}],staticClass:"select-dropdown"},[a("div",{staticClass:"select-option",on:{click:function(t){return e.selectSpace("")}}},[e._v("全部")]),e._l(e.spaceList,function(t){return a("div",{staticClass:"select-option",class:{active:e.selectedSpace===t.name},on:{click:function(a){return e.selectSpace(t.name)}}},[e._v(e._s(t.name))])})],2)])],1),a("div",{staticClass:"select"},[a("div",{staticClass:"select-value",on:{click:function(t){return t.stopPropagation(),e.toggleStyleSelect(t)}}},[e._v(e._s(e.selectedStyle||"选择风格"))]),a("transition",{attrs:{name:"expand"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.styleSelect,expression:"styleSelect"}],staticClass:"select-dropdown"},[a("div",{staticClass:"select-option",on:{click:function(t){return e.selectStyle("")}}},[e._v("全部")]),e._l(e.styleList,function(t){return a("div",{staticClass:"select-option",class:{active:e.selectedStyle===t.name},on:{click:function(a){return e.selectStyle(t.name)}}},[e._v(e._s(t.name))])})],2)])],1)]),a("div",{staticClass:"cases-container"},[a("selected-case",{directives:[{name:"show",rawName:"v-show",value:0===e.activeTab,expression:"activeTab === 0"}],attrs:{selectedStyle:e.selectedStyle,selectedSpace:e.selectedSpace}}),a("my-cases",{directives:[{name:"show",rawName:"v-show",value:1===e.activeTab,expression:"activeTab === 1"}],ref:"myCase",attrs:{selectedStyle:e.selectedStyle,selectedSpace:e.selectedSpace}})],1),a("caseDetail",{on:{delete:e.deleteMyCase}})],1)},i=[],n=a("e20c"),c=a("63d7"),r=a("b1c2"),o=a("0d2c"),l=a("591a"),d={name:"cases",data:function(){return{tabs:[{name:"精选案例"},{name:"我的案例"}],activeTab:0,spaceSelect:!1,styleSelect:!1,selectedStyle:"",selectedSpace:""}},components:{selectedCase:c["default"],myCases:r["default"],caseDetail:o["default"]},methods:{deleteMyCase:function(){this.$refs.myCase.getSceneCaseList()},selectTab:function(e){this.activeTab=e},selectSpace:function(e){this.selectedSpace=e},selectStyle:function(e){this.selectedStyle=e},toggleSpaceSelect:function(){this.spaceSelect=!this.spaceSelect},toggleStyleSelect:function(){this.styleSelect=!this.styleSelect}},mounted:function(){var e=this;document.addEventListener("click",function(){e.spaceSelect=!1,e.styleSelect=!1})},computed:Object(n["a"])({},Object(l["c"])({styleList:function(e){return e.sketch.styleList},spaceList:function(e){return e.sketch.spaceList}}))},u=d,h=(a("d78b"),a("17cc")),p=Object(h["a"])(u,s,i,!1,null,"068a3674",null);t["default"]=p.exports},"5caa":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sketch-goods"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.$route.query.style_words||e.$route.query.space_words,expression:"$route.query.style_words || $route.query.space_words"}],staticClass:"sketch-goods-back",on:{click:e.back}},[a("div",{staticClass:"iconfont icon-back-1"}),a("div",{staticClass:"detail-header-title"},[e._v("返回")])]),a("div",{staticClass:"sketch-goods-header"},[a("div",{staticClass:"search"},[a("div",{staticClass:"search-icon icon-search"}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.keyword,expression:"keyword"}],staticClass:"search-input",attrs:{placeholder:"请输入搜索内容"},domProps:{value:e.keyword},on:{input:function(t){t.target.composing||(e.keyword=t.target.value)}}}),e.keyword?a("div",{staticClass:"search-clear",on:{click:e.clearKeyword}},[a("div",{staticClass:"icon-close"})]):e._e()])]),a("div",{staticClass:"sketch-container"},[a("div",{staticClass:"entry-wrapper"},[a("div",{staticClass:"article"},[a("p",{staticClass:"article-title"},[e._v("品类")]),a("div",{staticClass:"article-container"},e._l(e.cates,function(t){return a("div",{staticClass:"cate",style:{background:t.backgroundColor},on:{click:function(a){return e.selectCate(t)}}},[a("touch-ripple",{attrs:{speed:3,opacity:.6}},[a("img",{attrs:{src:t.backgroundImage}}),a("div",{staticClass:"cate-content"},[e._v(e._s(t.name))])])],1)}),0)]),a("div",{staticClass:"article"},[a("p",{staticClass:"article-title"},[e._v("风格")]),a("div",{staticClass:"article-container"},e._l(e.styleList,function(t){return a("div",{staticClass:"tag",on:{click:function(a){return e.setStyle(t.name)}}},[a("touch-ripple",{attrs:{speed:3,opacity:.4,color:"#000"}},[a("span",[e._v(e._s(t.name))])])],1)}),0)]),a("div",{staticClass:"article"},[a("p",{staticClass:"article-title"},[e._v("空间")]),a("div",{staticClass:"article-container"},e._l(e.spaceList,function(t){return a("div",{staticClass:"tag",on:{click:function(a){return e.setSpace(t.name)}}},[a("touch-ripple",{attrs:{speed:3,opacity:.4,color:"#000"}},[a("span",[e._v(e._s(t.name))])])],1)}),0)])]),a("transition",{attrs:{name:"mask"}},[e.goodListShow?a("good-list",{attrs:{keyword:e.keyword},on:{setKeyword:e.setKeyword}}):e._e()],1)],1),a("good-detail")],1)},i=[],n=(a("7364"),a("34a3"),a("e20c")),c=a("591a"),r=a("c66b"),o=a("e510"),l={name:"sketchGoods",data:function(){return{cates:[{name:"灯饰",backgroundColor:"#5080C6",query:{category_id:"1"},backgroundImage:a("3b3a")},{name:"家具",backgroundColor:"#32A25C",query:{category_id:"2"},backgroundImage:a("c59c")},{name:"装饰画",backgroundColor:"#5080C6",query:{category_id:"18"},backgroundImage:a("a8ba")},{name:"布艺家纺",backgroundColor:"#6A4DC9",query:{category_id:"19"},backgroundImage:a("31d0")},{name:"饰品",backgroundColor:"#D87808",query:{category_id:"23"},backgroundImage:a("fe24")},{name:"日用品",backgroundColor:"#6A4DC9",query:{category_id:"113"},backgroundImage:a("1d0b")}],keyword:""}},watch:{randomCate:function(e){e&&(this.keyword=e,this.changeRandomCate(""))},screeningConfirmed:function(e){e&&(this.keyword="",this.changeScreeningConfirm({confirmed:!1}))}},methods:Object(n["a"])({},Object(c["b"])(["changeRandomCate","changeScreeningConfirm"]),{back:function(){this.$router.replace({name:this.$route.name})},selectCate:function(e){this.$router.replace({name:this.$route.name,query:Object(n["a"])({},this.$route.query,e.query)})},setStyle:function(e){this.$router.replace({name:this.$route.name,query:Object(n["a"])({},this.$route.query,{style_words:e})})},setSpace:function(e){this.$router.replace({name:this.$route.name,query:Object(n["a"])({},this.$route.query,{space_words:e})})},setKeyword:function(e){this.goodsList=[],this.keyword=e},clearKeyword:function(){this.goodsList=[],this.keyword=""}}),computed:Object(n["a"])({},Object(c["c"])({randomCate:function(e){return e.sketch.randomCate},styleList:function(e){return e.sketch.styleList},spaceList:function(e){return e.sketch.spaceList},screeningConfirmed:function(e){return e.sketch.screeningConfirm.confirmed}}),{goodListShow:function(){var e=this.$route.query,t=e.style_words,a=void 0===t?"":t,s=e.space_words,i=void 0===s?"":s,n=e.category_id,c=void 0===n?"":n;return!!(this.keyword||a||i||c)}}),components:{goodList:r["default"],goodDetail:o["default"]}},d=l,u=(a("8ce8"),a("17cc")),h=Object(u["a"])(d,s,i,!1,null,"28dda933",null);t["default"]=h.exports},"5ffa":function(e,t,a){},"610b":function(e,t,a){},"63d7":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("infinite-scroll",{staticClass:"cases-list",attrs:{loadMore:e.loadMore}},[e._l(e.caseData.ls,function(t){return s("div",{staticClass:"cases-item",on:{click:function(a){return a.stopPropagation(),e.openCaseDetail(t)}}},[s("div",{staticClass:"cases-item-img",style:{"background-image":"url("+t.preview+"?imageslim&imageView2/0/w/765)"}}),s("p",{staticClass:"cases-item-name"},[e._v(e._s(t.title))]),s("div",{staticClass:"cases-item-handles"},[s("div",{staticClass:"cases-item-btn",on:{click:function(a){return a.stopPropagation(),e.againCreation(t.cont,t.id)}}},[e._v("再创作")]),s("div",{staticClass:"cases-item-collection",on:{click:function(a){return a.stopPropagation(),e.collectionCase(t)}}},[t.is_collection?s("i",{staticClass:"icon-collection_active"}):s("i",{staticClass:"icon-collection"})])])])}),e.caseData.ls.length?e._e():s("div",{staticClass:"cases-list-info"},[s("img",{attrs:{src:a("d363")}}),s("div",{staticClass:"cases-list-info-txt"},[e._v("未找到相关案例")])])],2)},i=[],n=(a("7364"),a("4964")),c=(a("4453"),a("089b")),r=(a("34a3"),a("e20c")),o=a("591a"),l=a("880a"),d=a("fd88"),u={name:"selectedCases",props:{selectedStyle:String,selectedSpace:String},components:{infiniteScroll:d["a"]},data:function(){return{caseData:{ls:[]},isLoading:!1,isLoaded:!1}},watch:{selectedStyle:function(){this.getSceneCaseList()},selectedSpace:function(){this.getSceneCaseList()}},computed:Object(r["a"])({},Object(o["c"])({replace:function(e){return e.modal.replace}})),methods:Object(r["a"])({},Object(o["b"])(["showReplaceModal","changeCaseDetail","updateHistory"]),{openCaseDetail:function(e){var t=e.id;this.changeCaseDetail({show:!0,id:t})},collectionCase:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t){var a,s,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,a=t.is_collection,s=t.id,!a){e.next=7;break}return e.next=5,this.$axios.get(l["unCollectionCase"],{params:{id:s}});case 5:e.next=9;break;case 7:return e.next=9,this.$axios.get(l["collectionCase"],{params:{id:s}});case 9:this.$set(t,"is_collection",!a),e.next=16;break;case 12:e.prev=12,e.t0=e["catch"](0),i=e.t0.msg,this.$toast.error(i);case 16:case"end":return e.stop()}},e,this,[[0,12]])}));function t(t){return e.apply(this,arguments)}return t}(),loadMore:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t,a,s,i,c=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,!this.isLoading&&!this.isLoaded){e.next=3;break}return e.abrupt("return");case 3:return this.isLoading=!0,e.next=6,this.$axios.get(l["sceneCaseList"],{params:{page_code:this.caseData.page_code,style:this.selectedStyle,space:this.selectedSpace}});case 6:a=e.sent,s=a.data,(t=this.caseData.ls).push.apply(t,Object(n["a"])(s.ls)),this.caseData.page_code=s.page_code,s.ls.length||(this.isLoaded=!0),this.$nextTick(function(){c.isLoading=!1}),e.next=19;break;case 14:e.prev=14,e.t0=e["catch"](0),i=e.t0.msg,this.isLoading=!1,this.$toast.error(i);case 19:case"end":return e.stop()}},e,this,[[0,14]])}));function t(){return e.apply(this,arguments)}return t}(),getSceneCaseList:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t,a,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$axios.get(l["sceneCaseList"],{params:{style:this.selectedStyle,space:this.selectedSpace}});case 3:t=e.sent,a=t.data,this.caseData=a,this.isLoaded=!1,e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](0),s=e.t0.msg,this.$toast.error(s);case 13:case"end":return e.stop()}},e,this,[[0,9]])}));function t(){return e.apply(this,arguments)}return t}(),againCreation:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t,a){var s,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(s=this.$route.query,delete s["type"],this.replace.remind||!canvas.getActiveObject()){e.next=11;break}return e.next=5,this.showReplaceModal({title:"替换确认",paragraph:"将替换当前画布的全部内容"});case 5:if(i=e.sent,i){e.next=8;break}return e.abrupt("return");case 8:this.$router.replace({name:this.$route.name,params:{id:a},query:Object(r["a"])({},s,{time_stamp:(new Date).getTime()})}),e.next=12;break;case 11:this.$router.replace({name:this.$route.name,params:{id:a},query:Object(r["a"])({},s,{time_stamp:(new Date).getTime()})});case 12:case"end":return e.stop()}},e,this)}));function t(t,a){return e.apply(this,arguments)}return t}()}),created:function(){this.getSceneCaseList()}},h=u,p=(a("c987"),a("17cc")),m=Object(p["a"])(h,s,i,!1,null,"ddae96b8",null);t["default"]=m.exports},"7aae":function(e,t,a){},"7c6f":function(e,t,a){"use strict";var s=a("890f"),i=a.n(s);i.a},"890f":function(e,t,a){},"8a1f":function(e,t,a){"use strict";var s=a("f538"),i=a.n(s);i.a},"8ce8":function(e,t,a){"use strict";var s=a("3e51"),i=a.n(s);i.a},9056:function(e,t,a){"use strict";var s=a("0e43"),i=a.n(s);i.a},"92e5":function(e,t,a){},9377:function(e,t,a){},"94b8":function(e,t,a){"use strict";var s=a("2ad4"),i=a.n(s);i.a},"97c8":function(e,t,a){"use strict";a.r(t);var s,i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"materials",staticClass:"material"},[s("div",{staticClass:"filter"},[s("div",{staticClass:"select"},[s("div",{staticClass:"select-value",on:{click:function(t){return t.stopPropagation(),e.toggleSpaceSelect(t)}}},[e._v(e._s(e.selectedSpace||"选择空间"))]),s("transition",{attrs:{name:"expand"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.spaceSelect,expression:"spaceSelect"}],staticClass:"select-dropdown"},[s("div",{staticClass:"select-option",on:{click:function(t){return e.selectSpace("")}}},[e._v("全部")]),e._l(e.spaceList,function(t){return s("div",{staticClass:"select-option",class:{active:e.selectedSpace===t.name},on:{click:function(a){return e.selectSpace(t.name)}}},[e._v(e._s(t.name))])})],2)])],1),s("div",{staticClass:"select"},[s("div",{staticClass:"select-value",on:{click:function(t){return t.stopPropagation(),e.toggleStyleSelect(t)}}},[e._v(e._s(e.selectedStyle||"选择风格"))]),s("transition",{attrs:{name:"expand"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.styleSelect,expression:"styleSelect"}],staticClass:"select-dropdown"},[s("div",{staticClass:"select-option",on:{click:function(t){return e.selectStyle("")}}},[e._v("全部")]),e._l(e.styleList,function(t){return s("div",{staticClass:"select-option",class:{active:e.selectedStyle===t.name},on:{click:function(a){return e.selectStyle(t.name)}}},[e._v(e._s(t.name))])})],2)])],1)]),s("div",{staticClass:"material-container"},[e.list.length?s("infiniteScroll",{staticClass:"material-list",attrs:{loadMore:e.loadMore}},e._l(e.list,function(t){return s("div",{staticClass:"material-item"},[s("div",{staticClass:"material-item-img",style:{"background-image":"url("+t.img+"?imageslim&imageView2/0/w/765)"},attrs:{id:t.id,type:"material"}}),s("div",{staticClass:"material-item-cell"},[s("div",{staticClass:"material-item-info"},[e._v("点击添加到画布…")]),s("div",{staticClass:"material-item-collection",on:{click:function(a){return a.stopPropagation(),e.collectionMaterial(t)}}},[t.is_collection?s("i",{staticClass:"icon-collection_active"}):s("i",{staticClass:"icon-collection"})])]),s("div",{staticClass:"material-item-btns"},[s("div",{staticClass:"material-item-btn",on:{click:function(a){return e.replaceImage(t.img)}}},[e._v("替换")]),s("div",{staticClass:"material-item-btn",on:{click:function(a){return e.addImage(t.img)}}},[e._v("添加")])])])}),0):s("div",{staticClass:"material-list"},[s("div",{staticClass:"material-list-info"},[s("img",{attrs:{src:a("d363")}}),s("div",{staticClass:"material-list-info-txt"},[e._v("未找到相关案例")])])])],1)])},n=[],c=(a("f763"),a("608b"),a("3c6b"),a("4964")),r=(a("4453"),a("089b")),o=a("e20c"),l=a("880a"),d=a("fd88"),u=a("591a"),h=a("5428"),p=a.n(h),m={name:"materialStore",data:function(){return{list:[],pageCode:0,isLoading:!1,isLoaded:!1,spaceSelect:!1,styleSelect:!1,selectedStyle:"",selectedSpace:"",eventList:{TOUCH_START:this.isMobile()?"touchstart":"mousedown",TOUCH_MOVE:this.isMobile()?"touchmove":"mousemove",TOUCH_END:this.isMobile()?"touchend":"mouseup"}}},components:{infiniteScroll:d["a"]},watch:{selectedStyle:function(){this.getSceneMaterials()},selectedSpace:function(){this.getSceneMaterials()}},methods:Object(o["a"])({},Object(u["b"])(["changeSketchGoods","updateHistory"]),{collectionMaterial:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var a,s,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,a=t.is_collection,s=t.id,!a){e.next=7;break}return e.next=5,this.$axios.get(l["unCollectionMaterial"],{params:{id:s}});case 5:e.next=9;break;case 7:return e.next=9,this.$axios.get(l["collectionMaterial"],{params:{id:s}});case 9:this.$set(t,"is_collection",!a),e.next=16;break;case 12:e.prev=12,e.t0=e["catch"](0),i=e.t0.msg,this.$toast.error(i);case 16:case"end":return e.stop()}},e,this,[[0,12]])}));function t(t){return e.apply(this,arguments)}return t}(),selectSpace:function(e){this.selectedSpace=e},selectStyle:function(e){this.selectedStyle=e},toggleSpaceSelect:function(){this.spaceSelect=!this.spaceSelect},toggleStyleSelect:function(){this.styleSelect=!this.styleSelect},getSceneMaterials:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,a,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$axios.get(l["getSceneMaterials"],{params:{my:0,style:this.selectedStyle,space:this.selectedSpace}});case 3:t=e.sent,a=t.data,this.pageCode=a.page_code,this.list=a.ls,this.isLoaded=!1,e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](0),s=e.t0.msg,this.$toast.error(s);case 14:case"end":return e.stop()}},e,this,[[0,10]])}));function t(){return e.apply(this,arguments)}return t}(),loadMore:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,a,s,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,!this.isLoading&&!this.isLoaded){e.next=3;break}return e.abrupt("return");case 3:return this.isLoading=!0,e.next=6,this.$axios.get(l["getSceneMaterials"],{params:{my:0,page_code:this.pageCode,style:this.selectedStyle,space:this.selectedSpace}});case 6:a=e.sent,s=a.data,(t=this.list).push.apply(t,Object(c["a"])(s.ls)),this.pageCode=s.page_code,this.isLoaded=!s.ls.length,this.isLoading=!1,e.next=19;break;case 14:e.prev=14,e.t0=e["catch"](0),i=e.t0.msg,this.isLoading=!1,this.$toast.error(i);case 19:case"end":return e.stop()}},e,this,[[0,14]])}));function t(){return e.apply(this,arguments)}return t}(),isMobile:function(){return!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))},initDrag:function(){var e=this,t=new CustomEvent("mydragstart"),a=new CustomEvent("mydragend");this.$refs.materials.addEventListener(this.eventList.TOUCH_START,function(i){if(i.cancelable&&-1!==i.target.className.indexOf("material-item-img")){clearInterval(s);var n=500,c=e.isMobile()?i.changedTouches[0]:i,r=null,l=i.target,d=l.getBoundingClientRect(),u=!1,h=null;s=setTimeout(function(){window.dispatchEvent(t),r=l.cloneNode(!0),r.style.width=l.offsetWidth+"px",r.style.height=l.offsetHeight+"px",r.style.position="fixed",r.style.left=d.left+"px",r.style.top=d.top+"px",r.style.pointerEvents="none",r.style.transition="transform .3s",document.body.appendChild(r),setTimeout(function(){r.style.transform="scale(1.2)"},50);var a=function e(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,t.target.removeEventListener("click",e)},s=function(e){e.preventDefault()},i=function t(a){a.preventDefault(),a.target.removeEventListener(e.eventList.TOUCH_MOVE,s),a.target.removeEventListener(e.eventList.TOUCH_END,t)};l.addEventListener("click",a),l.addEventListener(e.eventList.TOUCH_MOVE,s),l.addEventListener(e.eventList.TOUCH_END,i)},n);var p=function(t){var a=e.isMobile()?t.changedTouches[0]:t;(Math.abs(a.clientX-c.clientX)>30||Math.abs(a.clientY-c.clientY)>30)&&clearInterval(s),requestAnimationFrame(function(){if(r){var a=e.isMobile()?t.changedTouches[0]:t,s=document.createEvent("Event");s.initEvent("myDragover",!0,!0),h=document.elementFromPoint(a.pageX,a.pageY),h&&h.dispatchEvent(s),u=s.defaultPrevented,r.style.left=Math.round(a.pageX-(c.pageX-d.left))+"px",r.style.top=Math.round(a.pageY-(c.pageY-d.top))+"px"}})};document.addEventListener(e.eventList.TOUCH_MOVE,p,{passive:!1}),document.addEventListener(e.eventList.TOUCH_END,function(t){if(clearInterval(s),document.removeEventListener(e.eventList.TOUCH_MOVE,p),r){if(u){var i=document.createEvent("Event");i.initEvent("myDrop",!0,!0);var n=e.isMobile()?t.changedTouches[0]:t,c=e.list.find(function(e){return parseInt(l.getAttribute("id"))===e.id});i["pageX"]=n.pageX,i["pageY"]=n.pageY,i["data"]=Object(o["a"])({type:l.getAttribute("type"),url:c.img},c),h.dispatchEvent(i)}document.body.removeChild(r),r=null,window.dispatchEvent(a)}})}})},handleDragEnd:function(e){window.dispatchEvent(window.mydragend),window.dragTarget=null},handleDragStart:function(e,t){e.dataTransfer.setData("type","material"),e.dataTransfer.setData("url",t.img),window.dispatchEvent(window.mydragstart)},replaceImage:function(e){var t=this,a=canvas.getActiveObjects();if(this.matrixShow)this.$toast.message("请先取消变形");else if(0!==a.length)if(a.length>1)this.$toast.message("只能替换单个素材");else if("i-text"!==a[0].type){var s=p()();canvas.getActiveObjects().forEach(function(e){e.goods_id&&t.changeSketchGoods({type:"remove",uid:e.uid}),canvas.remove(e)}),canvas.discardActiveObject().renderAll(),fabric.Image.fromURL(e+"?imageslim&imageView2/0/w/1000",function(e){var i=a[0].scaleX*a[0].width/e.width,n=Object(o["a"])({},a[0],{width:e.width,height:e.height,scaleX:i,scaleY:i,_element:e._element,_originalElement:e._originalElement,uid:s});n.goods_id&&delete n.goods_id,e.set(Object(o["a"])({},n)),canvas.add(e),canvas.setActiveObject(e),t.updateHistory()},{crossOrigin:"anonymous"})}else this.$toast.message("文本不能被替换");else this.$toast.message("请先选中被替换的素材")},addImage:function(e){var t=this,a=p()();fabric.Image.fromURL(e+"?imageslim&imageView2/0/w/1000",function(e){e.set({uid:a}),canvas.add(e),canvas.setActiveObject(e),t.updateHistory()},{crossOrigin:"anonymous"})}}),computed:Object(o["a"])({},Object(u["c"])({styleList:function(e){return e.sketch.styleList},spaceList:function(e){return e.sketch.spaceList},matrixShow:function(e){return e.sketch.matrix.show}})),created:function(){this.getSceneMaterials()},mounted:function(){var e=this;document.addEventListener("click",function(){e.spaceSelect=!1,e.styleSelect=!1}),this.initDrag()}},v=m,g=(a("9056"),a("17cc")),f=Object(g["a"])(v,i,n,!1,null,"cc6b19f4",null);t["default"]=f.exports},"9ddb":function(e,t,a){},a01d:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"index"},[a("div",{staticClass:"tabs"},e._l(e.tabs,function(t,s){return a("div",{staticClass:"tab",class:{active:e.activeTab===s},on:{click:function(t){return e.selectTab(s)}}},[e._v(e._s(t.name))])}),0),a("div",{staticClass:"index-container"},[a("collection-goods",{directives:[{name:"show",rawName:"v-show",value:0===e.activeTab,expression:"activeTab === 0"}]}),a("collection-cases",{directives:[{name:"show",rawName:"v-show",value:1===e.activeTab,expression:"activeTab === 1"}]}),a("collection-materials",{directives:[{name:"show",rawName:"v-show",value:2===e.activeTab,expression:"activeTab === 2"}]})],1)])},i=[],n=a("bc60"),c=a("1e8b"),r=a("be15"),o={name:"collection",data:function(){return{tabs:[{name:"商品"},{name:"案例"},{name:"素材"}],activeTab:0}},methods:{selectTab:function(e){this.activeTab=e}},components:{collectionGoods:n["default"],collectionCases:c["default"],collectionMaterials:r["default"]}},l=o,d=(a("7c6f"),a("17cc")),u=Object(d["a"])(l,s,i,!1,null,"860ee7f0",null);t["default"]=u.exports},a8a5:function(e,t,a){},a8ba:function(e,t,a){e.exports=a.p+"static/img/dp_huayi.9ebbb226.png"},aae5:function(e,t,a){},b1c2:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("infinite-scroll",{staticClass:"cases-list",attrs:{loadMore:e.loadMore}},[e._l(e.caseData.ls,function(t,a){return s("div",{staticClass:"cases-item",on:{click:function(a){return a.stopPropagation(),e.openCaseDetail(t)}}},[s("div",{staticClass:"cases-item-img",style:{"background-image":"url("+t.preview+"?imageslim&imageView2/0/w/765)"}}),s("p",{staticClass:"cases-item-name"},[e._v(e._s(t.title))]),s("div",{staticClass:"cases-item-handles"},[s("div",{staticClass:"cases-item-btn",on:{click:function(a){return a.stopPropagation(),e.againCreation(t.cont,t.id)}}},[e._v("再创作")]),s("div",{staticClass:"cases-item-collection",on:{click:function(a){return a.stopPropagation(),e.collectionCase(t)}}},[t.is_collection?s("i",{staticClass:"icon-collection_active"}):s("i",{staticClass:"icon-collection"})])])])}),e.caseData.ls.length?e._e():s("div",{staticClass:"cases-list-info"},[s("img",{attrs:{src:a("d363")}}),s("div",{staticClass:"cases-list-info-txt"},[e._v("未找到相关案例")])])],2)},i=[],n=(a("7364"),a("d4d5"),a("4964")),c=(a("4453"),a("089b")),r=(a("34a3"),a("e20c")),o=a("880a"),l=a("fd88"),d=a("591a"),u={name:"myCases",props:{selectedStyle:String,selectedSpace:String},data:function(){return{caseData:{ls:[]},isLoading:!1,isLoaded:!1,casesList:[]}},watch:{$route:function(e,t){e.query.temporarySave&&e.query.temporarySave!==t.query.temporarySave&&this.getSceneCaseList()},selectedStyle:function(){this.getSceneCaseList()},selectedSpace:function(){this.getSceneCaseList()}},components:{infiniteScroll:l["a"]},computed:Object(r["a"])({},Object(d["c"])({replace:function(e){return e.modal.replace}})),methods:Object(r["a"])({},Object(d["b"])(["showConfirmModal","showReplaceModal","changeCaseDetail","updateHistory","changeSketchGoods"]),{openCaseDetail:function(e){var t=e.id;this.changeCaseDetail({show:!0,id:t})},collectionCase:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t){var a,s,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,a=t.is_collection,s=t.id,!a){e.next=7;break}return e.next=5,this.$axios.get(o["unCollectionCase"],{params:{id:s}});case 5:e.next=9;break;case 7:return e.next=9,this.$axios.get(o["collectionCase"],{params:{id:s}});case 9:this.$set(t,"is_collection",!a),e.next=16;break;case 12:e.prev=12,e.t0=e["catch"](0),i=e.t0.msg,this.$toast.error(i);case 16:case"end":return e.stop()}},e,this,[[0,12]])}));function t(t){return e.apply(this,arguments)}return t}(),loadMore:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t,a,s,i,c=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,!this.isLoading&&!this.isLoaded){e.next=3;break}return e.abrupt("return");case 3:return this.isLoading=!0,e.next=6,this.$axios.get(o["sceneCaseList"],{params:{page_code:this.caseData.page_code,my:1,style:this.selectedStyle,space:this.selectedSpace}});case 6:a=e.sent,s=a.data,(t=this.caseData.ls).push.apply(t,Object(n["a"])(s.ls)),this.caseData.page_code=s.page_code,s.ls.length||(this.isLoaded=!0),this.$nextTick(function(){c.isLoading=!1}),e.next=19;break;case 14:e.prev=14,e.t0=e["catch"](0),i=e.t0.msg,this.$toast.error(i),this.isLoading=!1;case 19:case"end":return e.stop()}},e,this,[[0,14]])}));function t(){return e.apply(this,arguments)}return t}(),getSceneCaseList:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t,a,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$axios.get(o["sceneCaseList"],{params:{my:1,style:this.selectedStyle,space:this.selectedSpace}});case 3:t=e.sent,a=t.data,this.caseData=a,this.isLoaded=!1,e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](0),s=e.t0.msg,this.$toast.error(s);case 13:case"end":return e.stop()}},e,this,[[0,9]])}));function t(){return e.apply(this,arguments)}return t}(),deleteCase:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t,a){var s,i,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,Number(this.$route.params.id)!==t||"edit"!==this.$route.params.type){e.next=4;break}return this.$toast.error("操作无法完成，当前方案在编辑中"),e.abrupt("return");case 4:return e.next=6,this.showConfirmModal({title:"删除确认",paragraph:"确认要删除案例？",confirmButtonText:"确定"});case 6:if(s=e.sent,1!==s){e.next=13;break}return Number(this.$route.params.id)===t&&("edit"===this.$route.query.type&&(canvas.clear().renderAll(),this.changeSketchGoods({type:"clear"})),i=this.$route.query,delete i["type"],delete i["time_stamp"],this.$router.replace({name:this.$route.name,query:i})),e.next=11,this.$axios.post(o["sceneMaterials"],{id:t});case 11:this.$toast.success("删除成功！"),this.caseData.ls.splice(a,1);case 13:e.next=19;break;case 15:e.prev=15,e.t0=e["catch"](0),n=e.t0.msg,this.$toast.error(n);case 19:case"end":return e.stop()}},e,this,[[0,15]])}));function t(t,a){return e.apply(this,arguments)}return t}(),againCreation:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t,a){var s,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(s=this.$route.query,delete s["type"],this.replace.remind||!canvas.getActiveObject()){e.next=11;break}return e.next=5,this.showReplaceModal({title:"替换确认",paragraph:"将替换当前画布的全部内容"});case 5:if(i=e.sent,i){e.next=8;break}return e.abrupt("return");case 8:this.$router.replace({name:this.$route.name,params:{id:a},query:Object(r["a"])({},s,{time_stamp:(new Date).getTime()})}),e.next=12;break;case 11:this.$router.replace({name:this.$route.name,params:{id:a},query:Object(r["a"])({},s,{time_stamp:(new Date).getTime()})});case 12:case"end":return e.stop()}},e,this)}));function t(t,a){return e.apply(this,arguments)}return t}(),editCase:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.replace.remind||!canvas.getActiveObject()){e.next=9;break}return e.next=3,this.showReplaceModal({title:"替换确认",paragraph:"将替换当前画布的全部内容"});case 3:if(a=e.sent,a){e.next=6;break}return e.abrupt("return");case 6:this.$router.replace({name:this.$route.name,params:{id:t},query:Object(r["a"])({type:"edit",time_stamp:(new Date).getTime()},this.$route.query)}),e.next=10;break;case 9:this.$router.replace({name:this.$route.name,params:{id:t},query:Object(r["a"])({type:"edit",time_stamp:(new Date).getTime()},this.$route.query)});case 10:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()}),created:function(){this.getSceneCaseList()}},h=u,p=(a("bac0"),a("17cc")),m=Object(p["a"])(h,s,i,!1,null,"bb062aec",null);t["default"]=m.exports},b3e6:function(e,t,a){},bac0:function(e,t,a){"use strict";var s=a("b3e6"),i=a.n(s);i.a},bc60:function(e,t,a){"use strict";a.r(t);var s,i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("infinite-scroll",{ref:"goods",staticClass:"good-list",attrs:{loadMore:e.loadMore}},[e._l(e.goodsList,function(t,s){return a("div",{staticClass:"goods-body"},[a("div",{key:t.goods_id,staticClass:"good-item",on:{click:function(a){return e.openGoodDetail(t.goods_id,t.key,"goodsList")}}},[a("div",{staticClass:"good-btns"},[a("div",{staticClass:"good-btn",on:{click:function(a){return a.stopPropagation(),e.replaceImage(t.original_img,t)}}},[e._v("替换")]),a("div",{staticClass:"good-btn",on:{click:function(a){return a.stopPropagation(),e.addImage(t.original_img,t)}}},[e._v("添加")])]),a("div",{staticClass:"good-img",style:{"background-image":"url("+t.original_img+"?imageslim&imageView2/0/w/560)"},attrs:{id:t.goods_id,type:"good",source:"goodsList"}}),a("div",{staticClass:"good-cell"},[a("div",{staticClass:"good-money-vip"},[a("em",[e._v("¥"+e._s(t.shop_price))]),a("span",[e._v("会员")])]),t.is_collection?a("i",{staticClass:"icon-collection_active",on:{click:function(t){return t.stopPropagation(),e.collectionGood(s)}}}):a("i",{staticClass:"icon-collection",on:{click:function(t){return t.stopPropagation(),e.collectionGood(s)}}})]),a("div",{staticClass:"good-money"},[a("span",[e._v("零售价")]),a("em",[e._v("¥"+e._s(t.market_price))])]),a("p",{staticClass:"good-name"},[e._v(e._s(t.goods_name))])])])}),e.goodsList.length?e._e():a("div",{staticClass:"good-list-info"},[e._v("暂无收藏的商品")])],2)},n=[],c=(a("608b"),a("3c6b"),a("f763"),a("4964")),r=(a("4453"),a("089b")),o=a("e20c"),l=a("fd88"),d=a("880a"),u=a("591a"),h=a("5428"),p=a.n(h),m={name:"collectionGoods",data:function(){return{eventList:{TOUCH_START:this.isMobile()?"touchstart":"mousedown",TOUCH_MOVE:this.isMobile()?"touchmove":"mousemove",TOUCH_END:this.isMobile()?"touchend":"mouseup"},goodsList:[],pageCode:0,collectionStatus:!1,isLoading:!1,isLoaded:!1}},methods:Object(o["a"])({},Object(u["b"])(["changeSkuDetail","changeSketchGoods","updateHistory"]),{getGoodsList:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,a,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$axios.get(d["collectionSKU"]);case 3:t=e.sent,a=t.data,this.isLoading=!1,this.isLoaded=!1,this.pageCode=0,this.moreCates=a.c_list,this.pageCode=a.page_code,this.goodsList=a.ls,this.collectionStatus=!1,e.next=18;break;case 14:e.prev=14,e.t0=e["catch"](0),s=e.t0.msg,this.$toast.error(s);case 18:case"end":return e.stop()}},e,this,[[0,14]])}));function t(){return e.apply(this,arguments)}return t}(),loadMore:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,a,s,i,n=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,!this.isLoading&&!this.isLoaded){e.next=3;break}return e.abrupt("return");case 3:return this.isLoading=!0,e.next=6,this.$axios.get(d["collectionSKU"],{params:{page_code:this.pageCode}});case 6:a=e.sent,s=a.data,this.pageCode=s.page_code,(t=this.goodsList).push.apply(t,Object(c["a"])(s.ls)),this.isLoaded=!s.ls.length,this.$nextTick(function(){n.isLoading=!1}),e.next=19;break;case 14:e.prev=14,e.t0=e["catch"](0),i=e.t0.msg,this.isLoading=!1,this.$toast.error(i);case 19:case"end":return e.stop()}},e,this,[[0,14]])}));function t(){return e.apply(this,arguments)}return t}(),collectionGood:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var a,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,!this.collectionStatus){e.next=3;break}return e.abrupt("return");case 3:if(this.collectionStatus=!0,a=this.goodsList[t],!a.is_collection){e.next=10;break}return e.next=8,this.$axios.get(d["unCollection"],{params:{goods_id:a.goods_id}});case 8:e.next=12;break;case 10:return e.next=12,this.$axios.get(d["setCollection"],{params:{goods_id:a.goods_id}});case 12:this.$set(a,"is_collection",!a.is_collection),this.getGoodsList(),e.next=20;break;case 16:e.prev=16,e.t0=e["catch"](0),s=e.t0.msg,this.$toast.error(s);case 20:case"end":return e.stop()}},e,this,[[0,16]])}));function t(t){return e.apply(this,arguments)}return t}(),openGoodDetail:function(e,t,a){this.changeSkuDetail({show:!0,id:e,key:t,dataSource:a})},replaceImage:function(e,t){var a=this;if(this.matrix.show)this.$toast.message("请先取消变形");else{var s=canvas.getActiveObjects();if(0!==s.length)if(s.length>1)this.$toast.message("只能替换单个商品");else if("i-text"!==s[0].type){var i=p()();canvas.getActiveObjects().forEach(function(e){e.goods_id&&a.changeSketchGoods({type:"remove",uid:e.uid}),canvas.remove(e)}),canvas.discardActiveObject().renderAll(),fabric.Image.fromURL(e+"?imageslim&imageView2/0/w/1000",function(e){var n=s[0].scaleX*s[0].width/e.width,c=Object(o["a"])({},s[0],{width:e.width,height:e.height,scaleX:n,scaleY:n,_element:e._element,_originalElement:e._originalElement,goods_id:t.goods_id,goods_key:t.key,uid:i});e.set(Object(o["a"])({},c)),canvas.add(e),canvas.setActiveObject(e),a.changeSketchGoods({type:"set",good:Object(o["a"])({},t,{uid:i})}),a.updateHistory()},{crossOrigin:"anonymous"})}else this.$toast.message("文本不能被替换");else this.$toast.message("请先选中被替换的单品")}},addImage:function(e,t){var a=this,s=p()();fabric.Image.fromURL(e+"?imageslim&imageView2/0/w/1000",function(e){e.set({goods_id:t.goods_id,goods_key:t.key,left:100,top:100,uid:s}),e.scaleToWidth(300),canvas.add(e),canvas.setActiveObject(e),a.changeSketchGoods({type:"set",good:Object(o["a"])({},t,{uid:s})}),a.updateHistory()},{crossOrigin:"anonymous"})},isMobile:function(){return!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))},initDrag:function(){var e=this,t=new CustomEvent("mydragstart"),a=new CustomEvent("mydragend");this.$refs.goods.$el.addEventListener(this.eventList.TOUCH_START,function(i){if(i.cancelable&&-1!==i.target.className.indexOf("good-img")){clearInterval(s);var n=500,c=e.isMobile()?i.changedTouches[0]:i,r=null,l=i.target,d=l.getBoundingClientRect(),u=!1,h=null;s=setTimeout(function(){window.dispatchEvent(t),r=l.cloneNode(!0),r.style.width=l.offsetWidth+"px",r.style.height=l.offsetHeight+"px",r.style.position="fixed",r.style.left=d.left+"px",r.style.top=d.top+"px",r.style.pointerEvents="none",r.style.transition="transform .3s",document.body.appendChild(r),setTimeout(function(){r.style.transform="scale(1.2)"},50);var a=function e(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,t.target.removeEventListener("click",e)},s=function(e){e.preventDefault()},i=function t(a){a.preventDefault(),a.target.removeEventListener(e.eventList.TOUCH_MOVE,s),a.target.removeEventListener(e.eventList.TOUCH_END,t)};l.addEventListener("click",a),l.addEventListener(e.eventList.TOUCH_MOVE,s),l.addEventListener(e.eventList.TOUCH_END,i)},n);var p=function(t){var a=e.isMobile()?t.changedTouches[0]:t;(Math.abs(a.clientX-c.clientX)>30||Math.abs(a.clientY-c.clientY)>30)&&clearInterval(s),requestAnimationFrame(function(){if(r){t.preventDefault();var a=e.isMobile()?t.changedTouches[0]:t,s=document.createEvent("Event");s.initEvent("myDragover",!0,!0),h=document.elementFromPoint(a.pageX,a.pageY),h&&h.dispatchEvent(s),u=s.defaultPrevented,r.style.left=Math.round(a.pageX-(c.pageX-d.left))+"px",r.style.top=Math.round(a.pageY-(c.pageY-d.top))+"px"}})};document.addEventListener(e.eventList.TOUCH_MOVE,p),document.addEventListener(e.eventList.TOUCH_END,function(t){if(clearInterval(s),document.removeEventListener(e.eventList.TOUCH_MOVE,p),r){if(t.preventDefault(),u){var i=document.createEvent("Event");i.initEvent("myDrop",!0,!0);var n=e.isMobile()?t.changedTouches[0]:t,c=l.getAttribute("source"),d={};d=e[c].find(function(e){return parseInt(l.getAttribute("id"))===e.goods_id}),i["pageX"]=n.pageX,i["pageY"]=n.pageY,i["data"]=Object(o["a"])({type:l.getAttribute("type"),url:d.original_img},d),h.dispatchEvent(i)}document.body.removeChild(r),r=null,window.dispatchEvent(a)}})}})},handleTouchstart:function(e,t){var a=this;clearInterval(s),s=setTimeout(function(){e.preventDefault(),a.$set(t,"longtouch",!0)},500)},handleTouchend:function(e,t){clearInterval(s),t.longtouch&&(e.preventDefault(),this.$set(t,"longtouch",!1))}}),created:function(){this.getGoodsList()},mounted:function(){this.initDrag()},computed:Object(o["a"])({},Object(u["c"])({matrix:function(e){return e.sketch.matrix}})),components:{infiniteScroll:l["a"]}},v=m,g=(a("fe78"),a("17cc")),f=Object(g["a"])(v,i,n,!1,null,"67d72e89",null);t["default"]=f.exports},be15:function(e,t,a){"use strict";a.r(t);var s,i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"materials",staticClass:"material"},[a("infiniteScroll",{staticClass:"material-list",attrs:{loadMore:e.loadMore}},[e._l(e.list,function(t){return a("div",{staticClass:"material-item"},[a("div",{staticClass:"material-item-img",style:{"background-image":"url("+t.img+"?imageslim&imageView2/0/w/765)"},attrs:{id:t.id,type:"material"}}),a("div",{staticClass:"material-item-cell"},[a("div",{staticClass:"material-item-info"},[e._v("点击添加到画布…")]),a("div",{staticClass:"material-item-collection",on:{click:function(a){return a.stopPropagation(),e.collectionMaterial(t)}}},[t.is_collection?a("i",{staticClass:"icon-collection_active"}):a("i",{staticClass:"icon-collection"})])]),a("div",{staticClass:"material-item-btns"},[a("div",{staticClass:"material-item-btn",on:{click:function(a){return e.replaceImage(t.img)}}},[e._v("替换")]),a("div",{staticClass:"material-item-btn",on:{click:function(a){return e.addImage(t.img)}}},[e._v("添加")])])])}),e.list.length?e._e():a("div",{staticClass:"material-list-info"},[e._v("暂无收藏的素材")])],2)],1)},n=[],c=(a("f763"),a("608b"),a("3c6b"),a("4964")),r=(a("4453"),a("089b")),o=a("e20c"),l=a("880a"),d=a("fd88"),u=a("591a"),h=a("5428"),p=a.n(h),m={name:"materialStore",data:function(){return{list:[],pageCode:0,isLoading:!1,isLoaded:!1,collectionStatus:!1,eventList:{TOUCH_START:this.isMobile()?"touchstart":"mousedown",TOUCH_MOVE:this.isMobile()?"touchmove":"mousemove",TOUCH_END:this.isMobile()?"touchend":"mouseup"}}},components:{infiniteScroll:d["a"]},methods:Object(o["a"])({},Object(u["b"])(["changeSketchGoods","updateHistory"]),{collectionMaterial:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var a,s,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,!this.collectionStatus){e.next=3;break}return e.abrupt("return");case 3:if(this.collectionStatus=!0,a=t.is_collection,s=t.id,!a){e.next=10;break}return e.next=8,this.$axios.get(l["unCollectionMaterial"],{params:{id:s}});case 8:e.next=12;break;case 10:return e.next=12,this.$axios.get(l["collectionMaterial"],{params:{id:s}});case 12:this.$set(t,"is_collection",!a),this.getSceneMaterials(),e.next=20;break;case 16:e.prev=16,e.t0=e["catch"](0),i=e.t0.msg,this.$toast.error(i);case 20:case"end":return e.stop()}},e,this,[[0,16]])}));function t(t){return e.apply(this,arguments)}return t}(),getSceneMaterials:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,a,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$axios.get(l["getSceneMaterials"],{params:{is_collection:1,style:this.selectedStyle,space:this.selectedSpace}});case 3:t=e.sent,a=t.data,this.pageCode=a.page_code,this.list=a.ls,this.collectionStatus=!1,this.isLoaded=!1,e.next=15;break;case 11:e.prev=11,e.t0=e["catch"](0),s=e.t0.msg,this.$toast.error(s);case 15:case"end":return e.stop()}},e,this,[[0,11]])}));function t(){return e.apply(this,arguments)}return t}(),loadMore:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,a,s,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,!this.isLoading&&!this.isLoaded){e.next=3;break}return e.abrupt("return");case 3:return this.isLoading=!0,e.next=6,this.$axios.get(l["getSceneMaterials"],{params:{is_collection:1,page_code:this.pageCode,style:this.selectedStyle,space:this.selectedSpace}});case 6:a=e.sent,s=a.data,(t=this.list).push.apply(t,Object(c["a"])(s.ls)),this.pageCode=s.page_code,this.isLoaded=!s.ls.length,this.isLoading=!1,e.next=19;break;case 14:e.prev=14,e.t0=e["catch"](0),i=e.t0.msg,this.isLoading=!1,this.$toast.error(i);case 19:case"end":return e.stop()}},e,this,[[0,14]])}));function t(){return e.apply(this,arguments)}return t}(),isMobile:function(){return!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))},initDrag:function(){var e=this,t=new CustomEvent("mydragstart"),a=new CustomEvent("mydragend");this.$refs.materials.addEventListener(this.eventList.TOUCH_START,function(i){if(i.cancelable&&-1!==i.target.className.indexOf("material-item-img")){clearInterval(s);var n=500,c=e.isMobile()?i.changedTouches[0]:i,r=null,l=i.target,d=l.getBoundingClientRect(),u=!1,h=null;s=setTimeout(function(){window.dispatchEvent(t),r=l.cloneNode(!0),r.style.width=l.offsetWidth+"px",r.style.height=l.offsetHeight+"px",r.style.position="fixed",r.style.left=d.left+"px",r.style.top=d.top+"px",r.style.pointerEvents="none",r.style.transition="transform .3s",document.body.appendChild(r),setTimeout(function(){r.style.transform="scale(1.2)"},50);var a=function e(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,t.target.removeEventListener("click",e)},s=function(e){e.preventDefault()},i=function t(a){a.preventDefault(),a.target.removeEventListener(e.eventList.TOUCH_MOVE,s),a.target.removeEventListener(e.eventList.TOUCH_END,t)};l.addEventListener("click",a),l.addEventListener(e.eventList.TOUCH_MOVE,s),l.addEventListener(e.eventList.TOUCH_END,i)},n);var p=function(t){var a=e.isMobile()?t.changedTouches[0]:t;(Math.abs(a.clientX-c.clientX)>30||Math.abs(a.clientY-c.clientY)>30)&&clearInterval(s),requestAnimationFrame(function(){if(r){var a=e.isMobile()?t.changedTouches[0]:t,s=document.createEvent("Event");s.initEvent("myDragover",!0,!0),h=document.elementFromPoint(a.pageX,a.pageY),h&&h.dispatchEvent(s),u=s.defaultPrevented,r.style.left=Math.round(a.pageX-(c.pageX-d.left))+"px",r.style.top=Math.round(a.pageY-(c.pageY-d.top))+"px"}})};document.addEventListener(e.eventList.TOUCH_MOVE,p,{passive:!1}),document.addEventListener(e.eventList.TOUCH_END,function(t){if(clearInterval(s),document.removeEventListener(e.eventList.TOUCH_MOVE,p),r){if(u){var i=document.createEvent("Event");i.initEvent("myDrop",!0,!0);var n=e.isMobile()?t.changedTouches[0]:t,c=e.list.find(function(e){return parseInt(l.getAttribute("id"))===e.id});i["pageX"]=n.pageX,i["pageY"]=n.pageY,i["data"]=Object(o["a"])({type:l.getAttribute("type"),url:c.img},c),h.dispatchEvent(i)}document.body.removeChild(r),r=null,window.dispatchEvent(a)}})}})},handleDragEnd:function(e){window.dispatchEvent(window.mydragend),window.dragTarget=null},handleDragStart:function(e,t){e.dataTransfer.setData("type","material"),e.dataTransfer.setData("url",t.img),window.dispatchEvent(window.mydragstart)},replaceImage:function(e){var t=this,a=canvas.getActiveObjects();if(this.matrixShow)this.$toast.message("请先取消变形");else if(0!==a.length)if(a.length>1)this.$toast.message("只能替换单个素材");else if("i-text"!==a[0].type){var s=p()();canvas.getActiveObjects().forEach(function(e){e.goods_id&&t.changeSketchGoods({type:"remove",uid:e.uid}),canvas.remove(e)}),canvas.discardActiveObject().renderAll(),fabric.Image.fromURL(e+"?imageslim&imageView2/0/w/1000",function(e){var i=a[0].scaleX*a[0].width/e.width,n=Object(o["a"])({},a[0],{width:e.width,height:e.height,scaleX:i,scaleY:i,_element:e._element,_originalElement:e._originalElement,uid:s});n.goods_id&&delete n.goods_id,e.set(Object(o["a"])({},n)),canvas.add(e),canvas.setActiveObject(e),t.updateHistory()},{crossOrigin:"anonymous"})}else this.$toast.message("文本不能被替换");else this.$toast.message("请先选中被替换的素材")},addImage:function(e){var t=this,a=p()();fabric.Image.fromURL(e+"?imageslim&imageView2/0/w/1000",function(e){e.set({uid:a}),canvas.add(e),canvas.setActiveObject(e),t.updateHistory()},{crossOrigin:"anonymous"})}}),computed:Object(o["a"])({},Object(u["c"])({styleList:function(e){return e.sketch.styleList},spaceList:function(e){return e.sketch.spaceList},matrixShow:function(e){return e.sketch.matrix.show}})),created:function(){this.getSceneMaterials()},mounted:function(){this.initDrag()}},v=m,g=(a("8a1f"),a("17cc")),f=Object(g["a"])(v,i,n,!1,null,"4cdfcf08",null);t["default"]=f.exports},be85:function(e,t,a){"use strict";var s=a("92e5"),i=a.n(s);i.a},c59c:function(e,t,a){e.exports=a.p+"static/img/dp_jiaji.6fd02e71.png"},c6c1:function(e,t,a){"use strict";a.r(t);var s,i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"materials",staticClass:"material"},[s("div",{staticClass:"filter"},[s("div",{staticClass:"select"},[s("div",{staticClass:"select-value",on:{click:function(t){return t.stopPropagation(),e.toggleSpaceSelect(t)}}},[e._v(e._s(e.selectedSpace||"选择空间"))]),s("transition",{attrs:{name:"expand"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.spaceSelect,expression:"spaceSelect"}],staticClass:"select-dropdown"},[s("div",{staticClass:"select-option",on:{click:function(t){return e.selectSpace("")}}},[e._v("全部")]),e._l(e.spaceList,function(t){return s("div",{staticClass:"select-option",class:{active:e.selectedSpace===t.name},on:{click:function(a){return e.selectSpace(t.name)}}},[e._v(e._s(t.name))])})],2)])],1),s("div",{staticClass:"select"},[s("div",{staticClass:"select-value",on:{click:function(t){return t.stopPropagation(),e.toggleStyleSelect(t)}}},[e._v(e._s(e.selectedStyle||"选择风格"))]),s("transition",{attrs:{name:"expand"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.styleSelect,expression:"styleSelect"}],staticClass:"select-dropdown"},[s("div",{staticClass:"select-option",on:{click:function(t){return e.selectStyle("")}}},[e._v("全部")]),e._l(e.styleList,function(t){return s("div",{staticClass:"select-option",class:{active:e.selectedStyle===t.name},on:{click:function(a){return e.selectStyle(t.name)}}},[e._v(e._s(t.name))])})],2)])],1)]),s("div",{staticClass:"material-container"},[e.list.length?s("infiniteScroll",{staticClass:"material-list",attrs:{loadMore:e.loadMore}},e._l(e.list,function(t){return s("div",{staticClass:"material-item"},[s("div",{staticClass:"material-item-img",style:{"background-image":"url("+t.img+"?imageslim&imageView2/0/w/765)"},attrs:{id:t.id,type:"material"}}),s("div",{staticClass:"material-item-cell"},[s("div",{staticClass:"material-item-info"},[e._v("点击添加到画布…")]),s("div",{staticClass:"material-item-collection",on:{click:function(a){return a.stopPropagation(),e.collectionMaterial(t)}}},[t.is_collection?s("i",{staticClass:"icon-collection_active"}):s("i",{staticClass:"icon-collection"})])]),s("div",{staticClass:"material-item-btns"},[s("div",{staticClass:"material-item-btn",on:{click:function(a){return e.replaceImage(t.img)}}},[e._v("替换")]),s("div",{staticClass:"material-item-btn",on:{click:function(a){return e.addImage(t.img)}}},[e._v("添加")])])])}),0):s("div",{staticClass:"material-list"},[s("div",{staticClass:"material-list-info"},[s("img",{attrs:{src:a("d363")}}),s("div",{staticClass:"material-list-info-txt"},[e._v("未找到相关素材")])])])],1)])},n=[],c=(a("f763"),a("608b"),a("3c6b"),a("4964")),r=(a("4453"),a("089b")),o=a("e20c"),l=a("880a"),d=a("fd88"),u=a("591a"),h=a("5428"),p=a.n(h),m={name:"myMaterial",data:function(){return{list:[],pageCode:0,isLoading:!1,isLoaded:!1,spaceSelect:!1,styleSelect:!1,selectedStyle:"",selectedSpace:"",eventList:{TOUCH_START:this.isMobile()?"touchstart":"mousedown",TOUCH_MOVE:this.isMobile()?"touchmove":"mousemove",TOUCH_END:this.isMobile()?"touchend":"mouseup"}}},components:{infiniteScroll:d["a"]},watch:{selectedStyle:function(){this.getSceneMaterials()},selectedSpace:function(){this.getSceneMaterials()}},methods:Object(o["a"])({},Object(u["b"])(["changeSketchGoods","updateHistory"]),{collectionMaterial:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var a,s,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,a=t.is_collection,s=t.id,!a){e.next=7;break}return e.next=5,this.$axios.get(l["unCollectionMaterial"],{params:{id:s}});case 5:e.next=9;break;case 7:return e.next=9,this.$axios.get(l["collectionMaterial"],{params:{id:s}});case 9:this.$set(t,"is_collection",!a),e.next=16;break;case 12:e.prev=12,e.t0=e["catch"](0),i=e.t0.msg,this.$toast.error(i);case 16:case"end":return e.stop()}},e,this,[[0,12]])}));function t(t){return e.apply(this,arguments)}return t}(),selectSpace:function(e){this.selectedSpace=e},selectStyle:function(e){this.selectedStyle=e},toggleSpaceSelect:function(){this.spaceSelect=!this.spaceSelect},toggleStyleSelect:function(){this.styleSelect=!this.styleSelect},getSceneMaterials:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,a,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$axios.get(l["getSceneMaterials"],{params:{my:1,style:this.selectedStyle,space:this.selectedSpace}});case 3:t=e.sent,a=t.data,this.pageCode=a.page_code,this.list=a.ls,this.isLoaded=!1,e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](0),s=e.t0.msg,this.$toast.error(s);case 14:case"end":return e.stop()}},e,this,[[0,10]])}));function t(){return e.apply(this,arguments)}return t}(),loadMore:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,a,s,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,!this.isLoading&&!this.isLoaded){e.next=3;break}return e.abrupt("return");case 3:return this.isLoading=!0,e.next=6,this.$axios.get(l["getSceneMaterials"],{params:{my:1,page_code:this.pageCode,style:this.selectedStyle,space:this.selectedSpace}});case 6:a=e.sent,s=a.data,(t=this.list).push.apply(t,Object(c["a"])(s.ls)),this.pageCode=s.page_code,this.isLoaded=!s.ls.length,this.isLoading=!1,e.next=19;break;case 14:e.prev=14,e.t0=e["catch"](0),i=e.t0.msg,this.isLoading=!1,this.$toast.error(i);case 19:case"end":return e.stop()}},e,this,[[0,14]])}));function t(){return e.apply(this,arguments)}return t}(),isMobile:function(){return!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))},initDrag:function(){var e=this,t=new CustomEvent("mydragstart"),a=new CustomEvent("mydragend");this.$refs.materials.addEventListener(this.eventList.TOUCH_START,function(i){if(i.cancelable&&-1!==i.target.className.indexOf("material-item-img")){clearInterval(s);var n=500,c=e.isMobile()?i.changedTouches[0]:i,r=null,l=i.target,d=l.getBoundingClientRect(),u=!1,h=null;s=setTimeout(function(){window.dispatchEvent(t),r=l.cloneNode(!0),r.style.width=l.offsetWidth+"px",r.style.height=l.offsetHeight+"px",r.style.position="fixed",r.style.left=d.left+"px",r.style.top=d.top+"px",r.style.pointerEvents="none",r.style.transition="transform .3s",document.body.appendChild(r),setTimeout(function(){r.style.transform="scale(1.2)"},50);var a=function e(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,t.target.removeEventListener("click",e)},s=function(e){e.preventDefault()},i=function t(a){a.preventDefault(),a.target.removeEventListener(e.eventList.TOUCH_MOVE,s),a.target.removeEventListener(e.eventList.TOUCH_END,t)};l.addEventListener("click",a),l.addEventListener(e.eventList.TOUCH_MOVE,s),l.addEventListener(e.eventList.TOUCH_END,i)},n);var p=function(t){var a=e.isMobile()?t.changedTouches[0]:t;(Math.abs(a.clientX-c.clientX)>30||Math.abs(a.clientY-c.clientY)>30)&&clearInterval(s),requestAnimationFrame(function(){if(r){var a=e.isMobile()?t.changedTouches[0]:t,s=document.createEvent("Event");s.initEvent("myDragover",!0,!0),h=document.elementFromPoint(a.pageX,a.pageY),h&&h.dispatchEvent(s),u=s.defaultPrevented,r.style.left=Math.round(a.pageX-(c.pageX-d.left))+"px",r.style.top=Math.round(a.pageY-(c.pageY-d.top))+"px"}})};document.addEventListener(e.eventList.TOUCH_MOVE,p,{passive:!1}),document.addEventListener(e.eventList.TOUCH_END,function(t){if(clearInterval(s),document.removeEventListener(e.eventList.TOUCH_MOVE,p),r){if(u){var i=document.createEvent("Event");i.initEvent("myDrop",!0,!0);var n=e.isMobile()?t.changedTouches[0]:t,c=e.list.find(function(e){return parseInt(l.getAttribute("id"))===e.id});i["pageX"]=n.pageX,i["pageY"]=n.pageY,i["data"]=Object(o["a"])({type:l.getAttribute("type"),url:c.img},c),h.dispatchEvent(i)}document.body.removeChild(r),r=null,window.dispatchEvent(a)}})}})},handleDragEnd:function(e){window.dispatchEvent(window.mydragend),window.dragTarget=null},handleDragStart:function(e,t){e.dataTransfer.setData("type","material"),e.dataTransfer.setData("url",t.img),window.dispatchEvent(window.mydragstart)},replaceImage:function(e){var t=this,a=canvas.getActiveObjects();if(this.matrixShow)this.$toast.message("请先取消变形");else if(0!==a.length)if(a.length>1)this.$toast.message("只能替换单个素材");else if("i-text"!==a[0].type){var s=p()();canvas.getActiveObjects().forEach(function(e){e.goods_id&&t.changeSketchGoods({type:"remove",uid:e.uid}),canvas.remove(e)}),canvas.discardActiveObject().renderAll(),fabric.Image.fromURL(e+"?imageslim&imageView2/0/w/1000",function(e){var i=a[0].scaleX*a[0].width/e.width,n=Object(o["a"])({},a[0],{width:e.width,height:e.height,scaleX:i,scaleY:i,_element:e._element,_originalElement:e._originalElement,uid:s});n.goods_id&&delete n.goods_id,e.set(Object(o["a"])({},n)),canvas.add(e),canvas.setActiveObject(e),t.updateHistory()},{crossOrigin:"anonymous"})}else this.$toast.message("文本不能被替换");else this.$toast.message("请先选中被替换的素材")},addImage:function(e){var t=this,a=p()();fabric.Image.fromURL(e+"?imageslim&imageView2/0/w/1000",function(e){e.set({uid:a}),canvas.add(e),canvas.setActiveObject(e),t.updateHistory()},{crossOrigin:"anonymous"})}}),computed:Object(o["a"])({},Object(u["c"])({styleList:function(e){return e.sketch.styleList},spaceList:function(e){return e.sketch.spaceList},matrixShow:function(e){return e.sketch.matrix.show}})),created:function(){this.getSceneMaterials()},mounted:function(){var e=this;document.addEventListener("click",function(){e.spaceSelect=!1,e.styleSelect=!1}),this.initDrag()}},v=m,g=(a("0716"),a("17cc")),f=Object(g["a"])(v,i,n,!1,null,"4573db81",null);t["default"]=f.exports},c987:function(e,t,a){"use strict";var s=a("610b"),i=a.n(s);i.a},d4dd:function(e,t,a){},d78b:function(e,t,a){"use strict";var s=a("3895"),i=a.n(s);i.a},e510:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("transition",{attrs:{name:"scale"}},[a("infinite-scroll",{directives:[{name:"show",rawName:"v-show",value:e.skuDetailShow,expression:"skuDetailShow"}],ref:"goods",staticClass:"good-detail",attrs:{loadMore:e.loadMore}},[e.showBackTop?a("div",{staticClass:"back-top",on:{click:e.scrollToTop}},[a("i",{staticClass:"icon-up-1"})]):e._e(),a("div",{staticClass:"good-detail-close"},[a("i",{staticClass:"icon-close",on:{click:e.closeDetail}})]),a("div",{staticClass:"good-detail-box center"},[a("div",{staticClass:"good-detail-btns"},[a("div",{staticClass:"good-detail-btn",on:{click:function(t){return t.stopPropagation(),e.replaceImage(e.viewImg,e.good)}}},[e._v("替换")]),a("div",{staticClass:"good-detail-btn",on:{click:function(t){return t.stopPropagation(),e.addImage(e.viewImg,e.good)}}},[e._v("添加")]),a("div",{staticClass:"good-detail-btn",class:{"good-detail-btn_active":e.good.is_collection},on:{click:function(t){return t.stopPropagation(),e.collectionGood(e.good)}}},[e._v(e._s(e.good.is_collection?"已收藏":"收藏"))])]),a("div",{staticClass:"good-imgs-select"},e._l(e.good.img,function(t){return a("div",{staticClass:"good-img-item",class:{"img-select":t===e.viewImg},style:{"background-image":"url("+t+"?imageslim)"},on:{click:function(a){return e.changeImg(t)}}})}),0),a("div",{staticClass:"good-detail-img",style:{"background-image":"url("+e.viewImg+"?imageslim)"},attrs:{id:e.good.goods_id}})]),a("div",{staticClass:"good-detail-box"},[a("p",{staticClass:"good-detail-name"},[e._v(e._s(e.good.goods_name))]),a("section",{staticClass:"good-detail-section"},[a("div",{staticClass:"cell disabled"},[a("span",{staticClass:"cell-name"},[e._v("零售价")]),a("span",{staticClass:"cell-value"},[a("span",[e._v("￥")]),a("span",[e._v(e._s(e.good.market_price))])])]),a("div",{staticClass:"cell"},[a("span",{staticClass:"cell-name"},[e._v("会员价")]),a("span",{staticClass:"cell-value"},[a("em",[a("span",[e._v("￥")]),a("span",[e._v(e._s(e.good.shop_price))])])])])]),a("section",{staticClass:"good-detail-section"},[a("div",{staticClass:"cell"},[a("span",{staticClass:"cell-brand cell-name"},[e._v("品牌")]),a("span",{staticClass:"cell-brand-value cell-value"},[e._v(e._s(e.good.brand))])])]),a("section",{staticClass:"good-detail-section"},e._l(e.good.attr,function(t){return a("div",{staticClass:"cell"},[a("span",{staticClass:"cell-name"},[e._v(e._s(t.attr_name)+"：")]),a("span",{staticClass:"cell-value"},[e._v(e._s(t.attr_value))])])}),0)]),a("div",{staticClass:"goods-recommend"},[a("p",{staticClass:"goods-title"},[e._v("品牌商品推荐")]),e.brandCates.length?a("div",{staticClass:"brand-cates"},[a("div",{staticClass:"brand-cate",class:{active:!e.brandCate},on:{click:function(t){return e.selectBrandCate("")}}},[a("touch-ripple",{attrs:{speed:3,opacity:.6}},[a("span",[e._v("全部")])])],1),e._l(e.brandCates,function(t){return a("div",{staticClass:"brand-cate",class:{active:e.brandCate===t.id},on:{click:function(a){return e.selectBrandCate(t.id)}}},[a("touch-ripple",{attrs:{speed:3,opacity:.6}},[a("span",[e._v(e._s(t.name))])])],1)})],2):e._e(),a("div",{staticClass:"goods-list"},e._l(e.brandGoods,function(t){return e.skuId!==t.goods_id?a("div",{staticClass:"goods-body"},[a("div",{key:t.goods_id,staticClass:"good-item",on:{click:function(a){return e.openGoodDetail(t.goods_id,t.key,"brandGoods")}}},[a("div",{staticClass:"good-btns"},[a("div",{staticClass:"good-btn",on:{click:function(a){return a.stopPropagation(),e.replaceImage(t.original_img,t)}}},[e._v("替换")]),a("div",{staticClass:"good-btn",on:{click:function(a){return a.stopPropagation(),e.addImage(t.original_img,t)}}},[e._v("添加")])]),a("div",{staticClass:"good-img",style:{"background-image":"url("+t.original_img+"?imageslim&imageView2/0/w/560)"},attrs:{id:t.goods_id,source:"brandGoods",type:"good"}}),a("div",{staticClass:"good-cell"},[a("div",{staticClass:"good-money-vip"},[a("em",[e._v("¥"+e._s(t.shop_price))]),a("span",[e._v("会员")])]),t.is_collection?a("i",{staticClass:"icon-collection_active",on:{click:function(a){return a.stopPropagation(),e.collectionGood(t)}}}):a("i",{staticClass:"icon-collection",on:{click:function(a){return a.stopPropagation(),e.collectionGood(t)}}})]),a("div",{staticClass:"good-money"},[a("span",[e._v("零售价")]),a("em",[e._v("¥"+e._s(t.market_price))])]),a("p",{staticClass:"good-name"},[e._v(e._s(t.goods_name))])])]):e._e()}),0)])])],1)},i=[],n=a("4964"),c=(a("f763"),a("4453"),a("089b")),r=a("e20c"),o=a("fd88"),l=a("880a"),d=a("591a"),u=a("5428"),h=a.n(u),p={name:"goodDetail",data:function(){return{good:{},brandId:"",brandCate:"",viewImg:"",pageCode:0,isLoading:!1,isLoaded:!1,brandGoods:[],brandCates:[],showBackTop:!1}},watch:{skuId:function(e){e&&this.getGoodDetail()}},methods:Object(r["a"])({},Object(d["b"])(["changeSkuDetail","changeSketchGoods","updateHistory"]),{selectBrandCate:function(e){this.brandCate=e,this.getBrandGoods(this.brandId)},changeImg:function(e){this.viewImg=e},collectionGood:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t){var a,s,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,a=t.is_collection,s=t.goods_id,!a){e.next=7;break}return e.next=5,this.$axios.get(l["unCollection"],{params:{goods_id:s}});case 5:e.next=9;break;case 7:return e.next=9,this.$axios.get(l["setCollection"],{params:{goods_id:s}});case 9:this.$set(t,"is_collection",!a),e.next=16;break;case 12:e.prev=12,e.t0=e["catch"](0),i=e.t0.msg,this.$toast.error(i);case 16:case"end":return e.stop()}},e,this,[[0,12]])}));function t(t){return e.apply(this,arguments)}return t}(),replaceImage:function(e,t){var a=this;if(this.matrix.show)this.$toast.message("请先取消变形");else{var s=canvas.getActiveObjects();if(0!==s.length)if(s.length>1)this.$toast.message("只能替换单个商品");else if("i-text"!==s[0].type){var i=h()();canvas.getActiveObjects().forEach(function(e){e.goods_id&&a.changeSketchGoods({type:"remove",uid:e.uid}),canvas.remove(e)}),canvas.discardActiveObject().renderAll(),fabric.Image.fromURL(e+"?imageslim&imageView2/0/w/1000",function(e){var n=s[0].scaleX*s[0].width/e.width,c=Object(r["a"])({},s[0],{width:e.width,height:e.height,scaleX:n,scaleY:n,_element:e._element,_originalElement:e._originalElement,goods_id:t.goods_id,goods_key:t.key,uid:i});e.set(Object(r["a"])({},c)),canvas.add(e),canvas.setActiveObject(e),a.changeSketchGoods({type:"set",good:Object(r["a"])({},t,{uid:i})}),a.updateHistory()},{crossOrigin:"anonymous"})}else this.$toast.message("文本不能被替换");else this.$toast.message("请先选中被替换的单品")}},addImage:function(e,t){var a=this,s=h()();fabric.Image.fromURL(e+"?imageslim&imageView2/0/w/1000",function(e){e.set({goods_id:t.goods_id,goods_key:t.key,left:100,top:100,uid:s}),e.scaleToWidth(300),canvas.add(e),canvas.setActiveObject(e),a.changeSketchGoods({type:"set",good:Object(r["a"])({},t,{uid:s})}),a.updateHistory()},{crossOrigin:"anonymous"})},loadMore:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t,a,s,i,c=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,!this.loading&&!this.isLoaded){e.next=3;break}return e.abrupt("return");case 3:return this.loading=!0,e.next=6,this.$axios.get(l["searchSKU"],{params:{brand_id:this.good.brand_id,page_code:this.pageCode,category_id:this.brandCate}});case 6:a=e.sent,s=a.data,this.pageCode=s.page_code,(t=this.brandGoods).push.apply(t,Object(n["a"])(s.ls)),s.ls.length||(this.isLoaded=!0),this.$nextTick(function(){c.loading=!1}),e.next=18;break;case 14:e.prev=14,e.t0=e["catch"](0),i=e.t0.msg,this.$toast.error(i);case 18:case"end":return e.stop()}},e,this,[[0,14]])}));function t(){return e.apply(this,arguments)}return t}(),getGoodDetail:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t,a,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$axios.get(l["skuInfo"],{params:{goods_id:this.skuId,key:this.skuKey}});case 3:t=e.sent,a=t.data,this.brandId=a.brand_id,this.getBrandGoods(a.brand_id),this.getBrandCates(a.brand_id),this.viewImg=a.img[0],this.good=a,e.next=16;break;case 12:e.prev=12,e.t0=e["catch"](0),s=e.t0.msg,this.$toast.error(s);case 16:case"end":return e.stop()}},e,this,[[0,12]])}));function t(){return e.apply(this,arguments)}return t}(),getBrandGoods:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t){var a,s,i,n=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.loading=!0,e.next=4,this.$axios.get(l["searchSKU"],{params:{brand_id:t,category_id:this.brandCate}});case 4:a=e.sent,s=a.data,this.brandGoods=s.ls,this.pageCode=s.page_code,this.$nextTick(function(){n.loading=!1}),e.next=15;break;case 11:e.prev=11,e.t0=e["catch"](0),i=e.t0.msg,this.$toast.error(i);case 15:case"end":return e.stop()}},e,this,[[0,11]])}));function t(t){return e.apply(this,arguments)}return t}(),getBrandCates:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t){var a,s,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$axios.get(l["getCategoryList"],{params:{brand_id:t}});case 3:a=e.sent,s=a.data,this.brandCates=s.ls,e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](0),i=e.t0.msg,this.$toast.error(i);case 12:case"end":return e.stop()}},e,this,[[0,8]])}));function t(t){return e.apply(this,arguments)}return t}(),openGoodDetail:function(e,t,a){this.changeSkuDetail({show:!0,id:e,key:t,dataSource:a})},closeDetail:function(){this.changeSkuDetail({show:!1,id:null})},watchScroller:function(){var e=this,t=this.$refs.goods.$el;t.addEventListener("scroll",function(){var t=e.$refs.goods.$el,a=t.scrollTop,s=t.offsetHeight;e.showBackTop=a>=2*s})},scrollToTop:function(){var e=this.$refs.goods.$el;e.scrollTop=0}}),mounted:function(){this.watchScroller()},created:function(){this.skuId&&this.getGoodDetail()},computed:Object(r["a"])({},Object(d["c"])({skuDetailShow:function(e){return e.sketch.skuDetail.show},skuId:function(e){return e.sketch.skuDetail.id},skuKey:function(e){return e.sketch.skuDetail.key},matrix:function(e){return e.sketch.matrix}})),components:{infiniteScroll:o["a"]}},m=p,v=(a("0b2e"),a("17cc")),g=Object(v["a"])(m,s,i,!1,null,"76b1b816",null);t["default"]=g.exports},e880:function(e,t,a){"use strict";var s=a("aae5"),i=a.n(s);i.a},ec25:function(e,t,a){"use strict";var s=a("7aae"),i=a.n(s);i.a},f43b:function(e,t,a){"use strict";var s=a("a8a5"),i=a.n(s);i.a},f538:function(e,t,a){},f935:function(e,t,a){"use strict";var s=a("d4dd"),i=a.n(s);i.a},fd9e:function(e,t,a){"use strict";var s=[a("4b32")],i=new Image;i.src=s[0],fabric.Object.prototype.setControlsVisibility({tl:!1,tr:!1,bl:!1,br:!1,ml:!1,mt:!1,mr:!1,mb:!1,mtr:!0}),fabric.Object.prototype.set({borderOpacityWhenMoving:.5,borderColor:"#333",borderDashArray:[10,10],borderScaleFactor:2,transparentCorners:!0,cornerStrokeColor:"#333",cornerSize:25,lockScalingFlip:!0,lockUniScaling:!0}),fabric.Object.prototype._drawControl=function(e,t,a,s,n,c){if(c=c||{},this.isControlVisible(e)){var r=this.cornerSize;!this.transparentCorners&&this.cornerStrokeColor;t.drawImage(i,s,n,r,r)}},t["a"]=fabric},fe24:function(e,t,a){e.exports=a.p+"static/img/dp_shipin.422ded06.png"},fe78:function(e,t,a){"use strict";var s=a("09ed"),i=a.n(s);i.a}}]);