(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3bc2a6bc","chunk-5e04f6b8"],{"05ba":function(t,e){var a="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(a){var o=new Uint8Array(16);t.exports=function(){return a(o),o}}else{var s=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0===(3&e)&&(t=4294967296*Math.random()),s[e]=t>>>((3&e)<<3)&255;return s}}},"37ea":function(t,e,a){},4964:function(t,e,a){"use strict";function o(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}function s(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function n(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function i(t){return o(t)||s(t)||n()}a.d(e,"a",function(){return i})},5143:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"scale"}},[t.brandGoodsDetailShow?a("infinite-scroll",{staticClass:"good-detail",attrs:{loadMore:t.loadMore}},[a("div",{staticClass:"good-detail-close"},[a("i",{staticClass:"icon-close",on:{click:t.closeDetail}})]),a("div",{staticClass:"good-detail-box center"},[a("div",{staticClass:"good-detail-btns"},[a("div",{staticClass:"good-detail-btn",on:{click:function(e){return e.stopPropagation(),t.replaceImage(t.viewImg,t.good)}}},[t._v("替换")]),a("div",{staticClass:"good-detail-btn",on:{click:function(e){return e.stopPropagation(),t.addImage(t.viewImg,t.good)}}},[t._v("添加")]),a("div",{staticClass:"good-detail-btn",class:{"good-detail-btn_active":t.good.is_collection},on:{click:function(e){return e.stopPropagation(),t.collectionGood(t.good)}}},[t._v(t._s(t.good.is_collection?"已收藏":"收藏"))])]),a("div",{staticClass:"good-imgs-select"},t._l(t.good.img,function(e){return a("div",{staticClass:"good-img-item",class:{"img-select":e===t.viewImg},style:{"background-image":"url("+e+"?imageslim)"},on:{click:function(a){return t.changeImg(e)}}})}),0),a("div",{staticClass:"good-detail-img",style:{"background-image":"url("+t.viewImg+"?imageslim)"},attrs:{id:t.good.goods_id}})]),a("div",{staticClass:"good-detail-box"},[a("p",{staticClass:"good-detail-name"},[t._v(t._s(t.good.goods_name))]),a("section",{staticClass:"good-detail-section"},[a("div",{staticClass:"cell disabled"},[a("span",{staticClass:"cell-name"},[t._v("零售价")]),a("span",{staticClass:"cell-value"},[a("span",[t._v("￥")]),a("span",[t._v(t._s(t.good.market_price))])])]),a("div",{staticClass:"cell"},[a("span",{staticClass:"cell-name"},[t._v("会员价")]),a("span",{staticClass:"cell-value"},[a("em",[a("span",[t._v("￥")]),a("span",[t._v(t._s(t.good.shop_price))])])])])]),a("section",{staticClass:"good-detail-section"},[a("div",{staticClass:"cell"},[a("span",{staticClass:"cell-brand cell-name"},[t._v("品牌")]),a("span",{staticClass:"cell-brand-value cell-value"},[t._v(t._s(t.good.brand))])])]),a("section",{staticClass:"good-detail-section"},t._l(t.good.attr,function(e){return a("div",{staticClass:"cell"},[a("span",{staticClass:"cell-name"},[t._v(t._s(e.attr_name)+"：")]),a("span",{staticClass:"cell-value"},[t._v(t._s(e.attr_value))])])}),0)]),a("div",{staticClass:"goods-recommend"},[a("p",{staticClass:"goods-title"},[t._v("品牌商品推荐")]),t.brandCates.length?a("div",{staticClass:"brand-cates"},[a("div",{staticClass:"brand-cate",class:{active:!t.brandCate},on:{click:function(e){return t.selectBrandCate("")}}},[a("touch-ripple",{attrs:{speed:3,opacity:.6}},[a("span",[t._v("全部")])])],1),t._l(t.brandCates,function(e){return a("div",{staticClass:"brand-cate",class:{active:t.brandCate===e.id},on:{click:function(a){return t.selectBrandCate(e.id)}}},[a("touch-ripple",{attrs:{speed:3,opacity:.6}},[a("span",[t._v(t._s(e.name))])])],1)})],2):t._e(),t._l(t.brandGoods,function(e){return t.brandGoodsId!==e.goods_id?a("div",{staticClass:"goods-body"},[a("div",{key:e.goods_id,staticClass:"good-item",on:{click:function(a){return t.openGoodDetail(e.goods_id,e.key,"brandGoods")}}},[a("div",{staticClass:"good-btns"},[a("div",{staticClass:"good-btn",on:{click:function(a){return a.stopPropagation(),t.replaceImage(e.original_img,e)}}},[t._v("替换")]),a("div",{staticClass:"good-btn",on:{click:function(a){return a.stopPropagation(),t.addImage(e.original_img,e)}}},[t._v("添加")])]),a("div",{staticClass:"good-img",style:{"background-image":"url("+e.original_img+"?imageslim&imageView2/0/w/560)"},attrs:{id:e.goods_id,source:"brandGoods",type:"good"}}),a("div",{staticClass:"good-cell"},[a("div",{staticClass:"good-money-vip"},[a("em",[t._v("¥"+t._s(e.shop_price))]),a("span",[t._v("会员")])]),e.is_collection?a("i",{staticClass:"icon-collection_active",on:{click:function(a){return a.stopPropagation(),t.collectionGood(e)}}}):a("i",{staticClass:"icon-collection",on:{click:function(a){return a.stopPropagation(),t.collectionGood(e)}}})]),a("div",{staticClass:"good-money"},[a("span",[t._v("零售价")]),a("em",[t._v("¥"+t._s(e.market_price))])]),a("p",{staticClass:"good-name"},[t._v(t._s(e.goods_name))])])]):t._e()})],2)]):t._e()],1)},s=[],n=a("4964"),i=(a("f763"),a("4453"),a("089b")),r=a("e20c"),c=a("fd88"),d=a("880a"),l=a("591a"),u=a("5428"),g=a.n(u),p={name:"goodDetail",data:function(){return{good:{},viewImg:"",pageCode:0,isLoading:!1,isLoaded:!1,brandCate:"",brandCates:[],brandGoods:[]}},watch:{brandGoodsId:function(t){t&&this.getGoodDetail()}},methods:Object(r["a"])({},Object(l["b"])(["changeBrandGoodsDetail","changeSketchGoods","updateHistory"]),{changeImg:function(t){this.viewImg=t},selectBrandCate:function(t){this.brandCate=t,this.getBrandGoods(this.brandId)},collectionGood:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e){var a,o,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,a=e.is_collection,o=e.goods_id,!a){t.next=7;break}return t.next=5,this.$axios.get(d["unCollection"],{params:{goods_id:o}});case 5:t.next=9;break;case 7:return t.next=9,this.$axios.get(d["setCollection"],{params:{goods_id:o}});case 9:this.$set(e,"is_collection",!a),t.next=16;break;case 12:t.prev=12,t.t0=t["catch"](0),s=t.t0.msg,this.$toast.error(s);case 16:case"end":return t.stop()}},t,this,[[0,12]])}));function e(e){return t.apply(this,arguments)}return e}(),getBrandCates:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e){var a,o,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$axios.get(d["getCategoryList"],{params:{brand_id:e}});case 3:a=t.sent,o=a.data,this.brandCates=o.ls,t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](0),s=t.t0.msg,this.$toast.error(s);case 12:case"end":return t.stop()}},t,this,[[0,8]])}));function e(e){return t.apply(this,arguments)}return e}(),replaceImage:function(t,e){var a=this;if(this.matrix.show)this.$toast.message("请先取消变形");else{var o=canvas.getActiveObjects();if(0!==o.length)if(o.length>1)this.$toast.message("只能替换单个商品");else if("i-text"!==o[0].type){var s=g()();canvas.getActiveObjects().forEach(function(t){t.goods_id&&a.changeSketchGoods({type:"remove",uid:t.uid}),canvas.remove(t)}),canvas.discardActiveObject().renderAll(),fabric.Image.fromURL(t+"?imageslim&imageView2/0/w/1000",function(t){var n=o[0].scaleX*o[0].width/t.width,i=Object(r["a"])({},o[0],{width:t.width,height:t.height,scaleX:n,scaleY:n,_element:t._element,_originalElement:t._originalElement,goods_id:e.goods_id,goods_key:e.key,uid:s});t.set(Object(r["a"])({},i)),canvas.add(t),canvas.setActiveObject(t),a.changeSketchGoods({type:"set",good:Object(r["a"])({},e,{uid:s})}),a.updateHistory()},{crossOrigin:"anonymous"})}else this.$toast.message("文本不能被替换");else this.$toast.message("请先选中被替换的单品")}},addImage:function(t,e){var a=this,o=g()();fabric.Image.fromURL(t+"?imageslim&imageView2/0/w/1000",function(t){t.set({goods_id:e.goods_id,goods_key:e.key,left:100,top:100,uid:o}),t.scaleToWidth(300),canvas.add(t),canvas.setActiveObject(t),a.changeSketchGoods({type:"set",good:Object(r["a"])({},e,{uid:o})}),a.updateHistory()},{crossOrigin:"anonymous"})},loadMore:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e,a,o,s,i=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!this.loading&&!this.isLoaded){t.next=3;break}return t.abrupt("return");case 3:return this.loading=!0,t.next=6,this.$axios.get(d["searchSKU"],{params:{brand_id:this.good.brand_id,page_code:this.pageCode,category_id:this.brandCate}});case 6:a=t.sent,o=a.data,this.pageCode=o.page_code,(e=this.brandGoods).push.apply(e,Object(n["a"])(o.ls)),o.ls.length||(this.isLoaded=!0),this.$nextTick(function(){i.loading=!1}),t.next=18;break;case 14:t.prev=14,t.t0=t["catch"](0),s=t.t0.msg,this.$toast.error(s);case 18:case"end":return t.stop()}},t,this,[[0,14]])}));function e(){return t.apply(this,arguments)}return e}(),getGoodDetail:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e,a,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$axios.get(d["skuInfo"],{params:{goods_id:this.brandGoodsId,key:this.brandGoodsKey}});case 3:e=t.sent,a=e.data,this.getBrandGoods(a.brand_id),this.getBrandCates(a.brand_id),this.viewImg=a.img[0],this.good=a,t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](0),o=t.t0.msg,this.$toast.error(o);case 15:case"end":return t.stop()}},t,this,[[0,11]])}));function e(){return t.apply(this,arguments)}return e}(),getBrandGoods:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e){var a,o,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$axios.get(d["searchSKU"],{params:{brand_id:e,category_id:this.brandCate}});case 3:a=t.sent,o=a.data,this.brandGoods=o.ls,this.pageCode=o.page_code,t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](0),s=t.t0.msg,this.$toast.error(s);case 13:case"end":return t.stop()}},t,this,[[0,9]])}));function e(e){return t.apply(this,arguments)}return e}(),openGoodDetail:function(t,e,a){this.changeBrandGoodsDetail({show:!0,id:t,key:e,dataSource:a})},closeDetail:function(){this.changeBrandGoodsDetail({show:!1,id:null})}}),created:function(){this.brandGoodsId&&this.getGoodDetail()},computed:Object(r["a"])({},Object(l["c"])({brandGoodsDetailShow:function(t){return t.sketch.brandGoodsDetail.show},brandGoodsId:function(t){return t.sketch.brandGoodsDetail.id},brandGoodsKey:function(t){return t.sketch.brandGoodsDetail.key},matrix:function(t){return t.sketch.matrix}})),components:{infiniteScroll:c["a"]}},v=p,h=(a("f4af"),a("17cc")),m=Object(h["a"])(v,o,s,!1,null,"7ec9b61c",null);e["default"]=m.exports},5428:function(t,e,a){var o=a("05ba"),s=a("97c1");function n(t,e,a){var n=e&&a||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null),t=t||{};var i=t.random||(t.rng||o)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e)for(var r=0;r<16;++r)e[n+r]=i[r];return e||s(i)}t.exports=n},"97c1":function(t,e){for(var a=[],o=0;o<256;++o)a[o]=(o+256).toString(16).substr(1);function s(t,e){var o=e||0,s=a;return[s[t[o++]],s[t[o++]],s[t[o++]],s[t[o++]],"-",s[t[o++]],s[t[o++]],"-",s[t[o++]],s[t[o++]],"-",s[t[o++]],s[t[o++]],"-",s[t[o++]],s[t[o++]],s[t[o++]],s[t[o++]],s[t[o++]],s[t[o++]]].join("")}t.exports=s},c2f0:function(t,e,a){"use strict";var o=a("37ea"),s=a.n(o);s.a},cb1f:function(t,e,a){},f4af:function(t,e,a){"use strict";var o=a("cb1f"),s=a.n(o);s.a},fd88:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"scroller",attrs:{id:"scroller"}},[t._t("default")],2)},s=[],n=(a("d4d5"),{name:"infiniteScroll",props:{distance:{type:Number,default:100},loadMore:{type:Function,required:!0}},methods:{initScroller:function(){var t=this,e=this.$refs.scroller;e.addEventListener("scroll",function(a){var o=e.scrollHeight,s=e.scrollTop,n=e.offsetHeight;o-s-n<100&&t.loadMore()})}},mounted:function(){this.initScroller()}}),i=n,r=(a("c2f0"),a("17cc")),c=Object(r["a"])(i,o,s,!1,null,"0355fe16",null);e["a"]=c.exports}}]);