(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7619f234"],{"040f":function(t,e,s){"use strict";s.r(e);var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"scale"}},[s("infinite-scroll",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],ref:"goods",staticClass:"good-detail",attrs:{loadMore:t.loadMore}},[t.showBackTop?s("div",{staticClass:"back-top",on:{click:t.scrollToTop}},[s("i",{staticClass:"icon-up-1"})]):t._e(),s("div",{staticClass:"good-detail-close"},[s("i",{staticClass:"icon-close",on:{click:t.close}})]),s("div",{staticClass:"good-detail-box center"},[s("div",{staticClass:"good-imgs-select"},t._l(t.goods.all_img,function(e){return s("div",{staticClass:"good-img-item",class:{"img-select":e===t.viewImg},style:{"background-image":"url("+e+"?imageslim)"},on:{click:function(s){return t.changeViewImage(e)}}})}),0),s("div",{staticClass:"good-detail-img",style:{"background-image":"url("+t.viewImg+"?imageslim)"}})]),s("div",{staticClass:"good-detail-box"},[s("p",{staticClass:"good-detail-name"},[t._v(t._s(t.goods.goods_name))]),s("p",{staticClass:"good-detail-price"},[t._v(t._s(t.goods.shop_price))]),s("section",{staticClass:"good-detail-section"},t._l(t.goods.attr,function(e){return s("div",{staticClass:"cell"},[s("span",{staticClass:"cell-name"},[t._v(t._s(e.attr_name)+"：")]),s("span",{staticClass:"cell-value"},[t._v(t._s(e.attr_value))])])}),0)]),s("div",{staticClass:"goods-recommend"},[s("p",{staticClass:"goods-title"},[t._v("同款推荐")]),s("div",{staticClass:"goods-list"},t._l(t.recommend,function(e){return s("div",{staticClass:"goods-body"},[s("div",{staticClass:"good-item",on:{click:function(s){return t.open(e)}}},[s("div",{staticClass:"good-img",style:{"background-image":"url("+e.original_img+")"}}),s("div",{staticClass:"good-cell"},[s("div",{staticClass:"good-money-vip"},[s("em",[t._v("¥"+t._s(e.shop_price))])])]),s("p",{staticClass:"good-name"},[t._v(t._s(e.goods_name))])])])}),0)])])],1)},a=[],i=s("e20c"),r=s("4964"),n=(s("4453"),s("089b")),c=s("fd88"),l=s("880a"),d={name:"goodsDetail",data:function(){return{show:!1,markerId:"",goods:{},goodsId:"",goodsSKU:"",viewImg:"",recommend:[],pageCode:0,isLoading:!1,isLoaded:!1,showBackTop:!1}},methods:{changeViewImage:function(t){this.viewImg=img},collectionGood:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e){var s,o,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,s=e.is_collection,o=e.goods_id,!s){t.next=7;break}return t.next=5,this.$axios.get(l["unCollection"],{params:{goods_id:o}});case 5:t.next=9;break;case 7:return t.next=9,this.$axios.get(l["setCollection"],{params:{goods_id:o}});case 9:this.$set(e,"is_collection",!s),t.next=16;break;case 12:t.prev=12,t.t0=t["catch"](0),a=t.t0.msg,this.$toast.error(a);case 16:case"end":return t.stop()}},t,this,[[0,12]])}));function e(e){return t.apply(this,arguments)}return e}(),getRecommend:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){var e,s,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$axios.get(l["searchGoods"],{params:{shop_cid:this.goods.shop_cid,page_code:0,page_size:10}});case 3:e=t.sent,s=e.data,this.recommend=s.ls,this.pageCode=s.page_code,this.isLoaded=!s.ls.length,t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](0),o=t.t0.msg,this.$toast.error(o);case 14:case"end":return t.stop()}},t,this,[[0,10]])}));function e(){return t.apply(this,arguments)}return e}(),loadMore:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){var e,s,o,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!this.loading&&!this.isLoaded){t.next=3;break}return t.abrupt("return");case 3:return this.loading=!0,t.next=6,this.$axios.get(l["searchGoods"],{params:{shop_cid:this.goods.shop_cid,page_code:this.pageCode,page_size:10}});case 6:s=t.sent,o=s.data,this.pageCode=o.page_code,(e=this.recommend).push.apply(e,Object(r["a"])(o.ls)),this.isLoaded=!o.ls.length,this.loading=!1,t.next=19;break;case 14:t.prev=14,t.t0=t["catch"](0),a=t.t0.msg,this.$toast.error(a),this.loading=!1;case 19:case"end":return t.stop()}},t,this,[[0,14]])}));function e(){return t.apply(this,arguments)}return e}(),getGoodDetail:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){var e,s,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$axios.get(l["skuInfo"],{params:{goods_id:this.goodsId,key:this.goodsSKU}});case 3:e=t.sent,s=e.data,this.viewImg=s.all_img[0],this.goods=s,this.getRecommend(),t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](0),o=t.t0.msg,this.$toast.error(o);case 14:case"end":return t.stop()}},t,this,[[0,10]])}));function e(){return t.apply(this,arguments)}return e}(),unSelectMarker:function(t){if(t){var e=PSV.plugins.markers.markers[t];if(e){var s={};switch(e.data.type){case"goods":s={image:e.data.icon.normal};break;case"transition":s={html:'<img src="'.concat(e.data.icon.normal,'" style="width: 50px; height: 50px;" /><p style="margin-top:10px">').concat(e.data.title,"</p>")};break}var o=new Image;o.src=e.data.icon.normal,o.onload=function(){PSV.plugins.markers.updateMarker(Object(i["a"])({id:t,selected:!1},s))}}}},open:function(t){var e=t.key,s=t.goods_id,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.markerId!==o&&this.unSelectMarker(this.markerId),this.markerId=o,this.goodsId=s,this.goodsSKU=e,this.getGoodDetail(),this.show=!0,this.scrollToTop()},close:function(){this.show=!1},watchScroller:function(){var t=this,e=this.$refs.goods.$el;e.addEventListener("scroll",function(){var e=t.$refs.goods.$el,s=e.scrollTop,o=e.offsetHeight;t.showBackTop=s>=2*o})},scrollToTop:function(){var t=this.$refs.goods.$el;t.scrollTop=0}},mounted:function(){this.watchScroller()},components:{infiniteScroll:c["a"]}},u=d,g=(s("1162"),s("17cc")),h=Object(g["a"])(u,o,a,!1,null,"1885c98e",null);e["default"]=h.exports},1162:function(t,e,s){"use strict";var o=s("da43"),a=s.n(o);a.a},"37ea":function(t,e,s){},4964:function(t,e,s){"use strict";function o(t){if(Array.isArray(t)){for(var e=0,s=new Array(t.length);e<t.length;e++)s[e]=t[e];return s}}function a(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function i(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function r(t){return o(t)||a(t)||i()}s.d(e,"a",function(){return r})},c2f0:function(t,e,s){"use strict";var o=s("37ea"),a=s.n(o);a.a},da43:function(t,e,s){},fd88:function(t,e,s){"use strict";var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"scroller",attrs:{id:"scroller"}},[t._t("default")],2)},a=[],i=(s("d4d5"),{name:"infiniteScroll",props:{distance:{type:Number,default:100},loadMore:{type:Function,required:!0}},methods:{initScroller:function(){var t=this,e=this.$refs.scroller;e.addEventListener("scroll",function(s){var o=e.scrollHeight,a=e.scrollTop,i=e.offsetHeight;o-a-i<100&&t.loadMore()})}},mounted:function(){this.initScroller()}}),r=i,n=(s("c2f0"),s("17cc")),c=Object(n["a"])(r,o,a,!1,null,"0355fe16",null);e["a"]=c.exports}}]);