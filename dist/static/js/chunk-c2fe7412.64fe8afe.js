(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c2fe7412"],{"0d80":function(t,e,s){"use strict";var i=s("da30"),r=s.n(i);r.a},"37ea":function(t,e,s){},4964:function(t,e,s){"use strict";function i(t){if(Array.isArray(t)){for(var e=0,s=new Array(t.length);e<t.length;e++)s[e]=t[e];return s}}function r(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function a(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function n(t){return i(t)||r(t)||a()}s.d(e,"a",function(){return n})},a432:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"index"},[t._m(0),i("div",{staticClass:"container"},[i("div",{staticClass:"sidebar"},[i("p",{staticClass:"sidebar-title"},[t._v("筛选条件：")]),i("div",{staticClass:"filter"},[i("p",{staticClass:"filter-name"},[t._v("风格")]),i("div",{staticClass:"filter-tags"},[i("div",{staticClass:"filter-tag",class:{active:!t.$route.query.style},on:{click:function(e){return t.selectStyle("")}}},[i("touch-ripple",{attrs:{speed:3,opacity:.4,color:"#000"}},[i("span",[t._v("全部")])])],1),t._l(t.styles,function(e){return i("div",{staticClass:"filter-tag",class:{active:t.$route.query.style===e.name},on:{click:function(s){return t.selectStyle(e.name)}}},[i("touch-ripple",{attrs:{speed:3,opacity:.4,color:"#000"}},[i("span",[t._v(t._s(e.name))])])],1)})],2)]),i("div",{staticClass:"filter"},[i("p",{staticClass:"filter-name"},[t._v("标签")]),i("div",{staticClass:"filter-tags"},[i("div",{staticClass:"filter-tag",class:{active:!t.$route.query.tag},on:{click:function(e){return t.selectTag("")}}},[i("touch-ripple",{attrs:{speed:3,opacity:.4,color:"#000"}},[i("span",[t._v("全部")])])],1),t._l(t.tags,function(e){return i("div",{staticClass:"filter-tag",class:{active:t.$route.query.tag===e},on:{click:function(s){return t.selectTag(e)}}},[i("touch-ripple",{attrs:{speed:3,opacity:.4,color:"#000"}},[i("span",[t._v(t._s(e))])])],1)})],2)])]),i("infiniteScroll",{ref:"scroll",attrs:{loadMore:t.loadMore}},[i("div",{staticClass:"join-shop"},[i("p",{staticClass:"join-shop-title"},[t._v("组合列表：")]),i("div",{staticClass:"join-list"},t._l(t.list,function(e){return i("router-link",{staticClass:"card",attrs:{to:{name:"joinShopDetail",params:{id:e.id}}}},[i("div",{staticClass:"card-title"},[t._v(t._s(e.name))]),i("div",{staticClass:"card-subtitle"},[t._v("共有"+t._s(e.goods_num)+"款商品")]),i("div",{staticClass:"card-preview"},[e.img_url?i("div",{staticClass:"card-cover",style:{"background-image":"url("+e.img_url+")"}}):t._e(),i("div",{staticClass:"card-images"},t._l(e.goods_img,function(s,r){return i("div",{staticClass:"card-image"},[i("img",{attrs:{src:s}}),r+1!==e.goods_img.length?i("i",{staticClass:"icon-add iconfont"}):t._e()])}),0)]),i("div",{staticClass:"card-desc"},[t._v(t._s(e.brief_introduction))]),i("div",{staticClass:"card-sub"},[i("div",{staticClass:"card-price"},[i("em",[t._v("¥"+t._s(e.shop_price))]),e.hasDiscount?i("div",{staticClass:"disabled"},[t._v("进货价 ¥"+t._s(e.old_shop_price))]):t._e()]),e.hasDiscount?i("div",{staticClass:"card-btn"},[i("span",[t._v("组合立减")]),i("em",[t._v(t._s(e.old_shop_price-e.shop_price)+"元")]),i("i",{staticClass:"icon-right"})]):i("div",{staticClass:"card-btn"},[i("span",[t._v("查看组合详情")])])])])}),1),t.isEmpty?i("div",{staticClass:"empty"},[i("img",{attrs:{src:s("d363")}}),i("p",[t._v("未找到相关案例")])]):t._e()])])],1)])},r=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("header",{staticClass:"header"},[s("div",{staticClass:"header-name"},[t._v("组合购")])])}],a=(s("7364"),s("34a3"),s("4964")),n=(s("f763"),s("e20c")),c=(s("4453"),s("089b")),o=s("880a"),l=s("fd88"),u={name:"joinShop",components:{infiniteScroll:l["a"]},data:function(){return{isEmpty:!1,allLoaded:!1,isLoading:!1,list:[],currentPage:1,styles:[],tags:[]}},methods:{loadMore:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(){var e,s,i,r,c=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!this.isLoading&&!this.allLoaded){t.next=3;break}return t.abrupt("return");case 3:return this.isLoading=!0,t.next=6,this.$axios.get(o["joinShopList"],{params:Object(n["a"])({page:this.currentPage},this.$route.query)});case 6:s=t.sent,i=s.data,i.list.forEach(function(t){t.goods_img=t.img_url?t.goods_img.splice(0,2):t.goods_img.splice(0,3),t.hasDiscount=parseFloat(t.old_shop_price)>parseFloat(t.shop_price)}),(e=this.list).push.apply(e,Object(a["a"])(i.list)),this.list.length&&(this.currentPage+=1),this.allLoaded=this.list.length>=i.total,this.isEmpty=!this.list.length,this.$nextTick(function(){c.isLoading=!1}),t.next=20;break;case 16:t.prev=16,t.t0=t["catch"](0),r=t.t0.msg,this.$toast.error(r);case 20:case"end":return t.stop()}},t,this,[[0,16]])}));function e(){return t.apply(this,arguments)}return e}(),getJoinShopList:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(){var e,s,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.currentPage=1,t.next=4,this.$axios.get(o["joinShopList"],{params:this.$route.query});case 4:e=t.sent,s=e.data,s.list.forEach(function(t){t.goods_img=t.img_url?t.goods_img.splice(0,2):t.goods_img.splice(0,3),t.hasDiscount=parseFloat(t.old_shop_price)>parseFloat(t.shop_price)}),this.list=s.list,this.list.length&&(this.currentPage+=1),this.allLoaded=this.list.length>=s.total,t.next=16;break;case 12:t.prev=12,t.t0=t["catch"](0),i=t.t0.msg,this.$toast.error(i);case 16:case"end":return t.stop()}},t,this,[[0,12]])}));function e(){return t.apply(this,arguments)}return e}(),selectStyle:function(t){this.$route.query.style!==t&&t?this.$router.replace({name:this.$route.name,query:Object(n["a"])({},this.$route.query,{style:t})}):this.$router.replace({name:this.$route.name,query:{tag:this.$route.query.tag}})},selectTag:function(t){this.$route.query.tag!==t&&t?this.$router.replace({name:this.$route.name,query:Object(n["a"])({},this.$route.query,{tag:t})}):this.$router.replace({name:this.$route.name,query:{style:this.$route.query.style}})},getFilterQuery:function(){var t={};return 0!==this.activeStyle&&(t["style"]=this.styles[this.activeStyle].name),-1!==this.activeTag&&(t["tag"]=this.tags[this.activeTag]),t},getStyles:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(){var e,s,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$axios.get(o["getStyleList"]);case 3:e=t.sent,s=e.data,this.styles=s.ls,t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](0),i=t.t0.msg,this.$toast.error(i);case 12:case"end":return t.stop()}},t,this,[[0,8]])}));function e(){return t.apply(this,arguments)}return e}(),getTagList:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(){var e,s,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$axios.get(o["joinShopTagList"]);case 3:e=t.sent,s=e.data,this.tags=s,t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](0),i=t.t0.msg,this.$toast.error(i);case 12:case"end":return t.stop()}},t,this,[[0,8]])}));function e(){return t.apply(this,arguments)}return e}()},beforeRouteEnter:function(t,e,s){s(function(t){t.getJoinShopList(),t.getStyles(),t.getTagList()})},beforeRouteUpdate:function(t,e,s){s(),this.$refs.scroll.$el.scrollTop=0,this.getJoinShopList()}},p=u,h=(s("0d80"),s("17cc")),d=Object(h["a"])(p,i,r,!1,null,"45b65694",null);e["default"]=d.exports},c2f0:function(t,e,s){"use strict";var i=s("37ea"),r=s.n(i);r.a},d363:function(t,e,s){t.exports=s.p+"static/img/search_img_notf_dis.097ce81b.png"},da30:function(t,e,s){},fd88:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"scroller",attrs:{id:"scroller"}},[t._t("default")],2)},r=[],a=(s("d4d5"),{name:"infiniteScroll",props:{distance:{type:Number,default:100},loadMore:{type:Function,required:!0}},methods:{initScroller:function(){var t=this,e=this.$refs.scroller;e.addEventListener("scroll",function(s){var i=e.scrollHeight,r=e.scrollTop,a=e.offsetHeight;i-r-a<100&&t.loadMore()})}},mounted:function(){this.initScroller()}}),n=a,c=(s("c2f0"),s("17cc")),o=Object(c["a"])(n,i,r,!1,null,"0355fe16",null);e["a"]=o.exports}}]);