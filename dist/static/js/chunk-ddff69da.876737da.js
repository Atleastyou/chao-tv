(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ddff69da"],{"04b8":function(t,e,r){"use strict";var i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("modal",{attrs:{name:"deletePopover",width:760,height:"auto"},on:{"before-open":t.beforeOpen}},[r("div",{staticClass:"popover"},[r("div",{staticClass:"popover-header"},[r("div",{staticClass:"popover-header-title"},[t._v("删除确认")]),r("div",{staticClass:"icon-close",on:{click:t.closePopover}})]),r("div",{staticClass:"popover-content"},[t._v("您确定删除该商品吗？")]),r("div",{staticClass:"popover-footer"},[r("div",{staticClass:"footer-button"},[r("c-button",{on:{click:t.closePopover}},[t._v("取消")])],1),r("div",{staticClass:"footer-button"},[r("c-button",{attrs:{type:"primary"},on:{click:t.confirm}},[t._v("确定")])],1)])])])},a=[],s=(r("4453"),r("089b")),n=r("e20c"),o=r("880a"),c={name:"deletePopover",data:function(){return{api:"",params:{}}},methods:{beforeOpen:function(t){var e=t.params;this.api=e.api,this.params=Object(n["a"])({},this.params,e.query)},closePopover:function(){this.$modal.hide("deletePopover")},confirm:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$axios.post(o[this.api],Object(n["a"])({},this.params));case 3:e=t.sent,e.data,this.$emit("change",!0),this.closePopover(),this.$toast.success("删除成功"),t.next=15;break;case 10:t.prev=10,t.t0=t["catch"](0),r=t.t0.msg,this.closePopover(),this.$toast.error(r);case 15:case"end":return t.stop()}},t,this,[[0,10]])}));function e(){return t.apply(this,arguments)}return e}()}},d=c,l=(r("787d"),r("17cc")),u=Object(l["a"])(d,i,a,!1,null,"24260c78",null);e["a"]=u.exports},"0b02":function(t,e,r){},4964:function(t,e,r){"use strict";function i(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}function a(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function n(t){return i(t)||a(t)||s()}r.d(e,"a",function(){return n})},"52e2":function(t,e,r){"use strict";var i=r("8992"),a=r.n(i);a.a},"73eb":function(t,e,r){t.exports=r.p+"static/img/search_img_pay_dis.d76e2e77.png"},"787d":function(t,e,r){"use strict";var i=r("0b02"),a=r.n(i);a.a},8648:function(t,e,r){"use strict";var i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"cart-header"},[r("div",{staticClass:"cart-header-left"},[r("div",{staticClass:"cart-header-title"},[t._v(t._s(t.title))]),t.count?r("div",{staticClass:"cart-header-count"},[t._v("共"+t._s(t.count)+"件商品")]):t._e()]),t.isShowBtn?r("div",{staticClass:"cart-header-right"},[r("c-button",{attrs:{type:t.buttonType},on:{click:t.click}},[t._v(t._s(t.btnValue))])],1):t._e(),t.isDeleteOrder?r("div",{staticClass:"cart-header-right"},[r("c-button",{attrs:{type:t.buttonType},on:{click:t.click}},[t._v("删除订单")])],1):t._e()])},a=[],s=(r("d4d5"),{name:"shoppingCardHeader",props:{title:String,btnValue:{type:String,default:""},count:{type:[String,Number],default:""},isDeleteOrder:{type:Boolean,default:!1},buttonType:{validator:function(t){return-1!==["primary","info","danger"].indexOf(t)||!t}},isShowBtn:{type:Boolean,default:!1}},data:function(){return{}},methods:{click:function(){this.$emit("click")}}}),n=s,o=(r("52e2"),r("17cc")),c=Object(o["a"])(n,i,a,!1,null,"55f59eaa",null);e["a"]=c.exports},8992:function(t,e,r){},9812:function(t,e,r){},aefe:function(t,e,r){"use strict";var i=r("9812"),a=r.n(i);a.a},d40a:function(t,e,r){"use strict";r.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"order"},[i("shopping-cart-header",{attrs:{title:t.title}}),i("div",{ref:"orderScroll",staticClass:"order-container"},[t.order.list.length?i("div",{staticClass:"order-items"},t._l(t.order.list,function(e){return i("div",{staticClass:"order-item",on:{click:function(r){return t.toOrderDetail(e)}}},[i("div",{staticClass:"order-item-header"},[i("div",{staticClass:"item-header-left"},[i("div",{staticClass:"order-item-id"},[t._v("订单号："+t._s(e.order_sn))]),i("div",{staticClass:"order-item-time"},[t._v("创建时间："+t._s(e.create_time))])]),i("div",{staticClass:"item-header-right",on:{click:function(r){return r.stopPropagation(),t.deleteOrder(e)}}},[t._v("删除订单")])]),t._l(e.goods,function(r){return 1===e.goods.length?i("div",{staticClass:"order-item-content",attrs:{name:"11111"}},[i("div",{staticClass:"order-item-img"},[i("img",{attrs:{src:r.original_img+"?imageslim&imageView2/0/w/400"}})]),i("div",{staticClass:"order-item-info"},[i("div",{staticClass:"order-item-name"},[t._v(t._s(r.goods_name))]),i("div",{staticClass:"order-item-spec"},[t._v(t._s(r.spec_key_name))])])]):t._e()}),e.goods.length>1?i("div",{staticClass:"order-item-content"},[i("div",{staticClass:"order-item-img"},t._l(e.goods,function(t){return i("img",{attrs:{src:t.original_img+"?imageslim&imageView2/0/w/400"}})}),0)]):t._e(),i("div",{staticClass:"order-item-footer"},[i("div",{staticClass:"order-item-num"},[t._v("共"+t._s(e.goods_num)+"件商品")]),i("div",{staticClass:"order-item-price"},[i("div",{staticClass:"item-price-label"},[t._v("合计：")]),i("div",{staticClass:"item-price-value"},[t._v("¥"+t._s(e.pay_amount))])]),i("div",{staticClass:"order-item-btn"},[i("c-button",{attrs:{type:"primary"},on:{click:function(r){return r.stopPropagation(),t.pay(e)}}},[t._v("去支付")])],1)])],2)}),0):i("div",{staticClass:"order-bg"},[i("img",{attrs:{src:r("73eb")}}),i("div",{staticClass:"order-bg-text"},[t._v("暂无待支付订单")])])]),i("delete-popover",{on:{change:t.deleteSome}})],1)},a=[],s=r("4964"),n=(r("4453"),r("089b")),o=r("8648"),c=r("04b8"),d=r("880a"),l={name:"unpaidOrder",data:function(){return{title:"待支付订单",page:1,pageSize:10,order:{list:[]},isLoading:!1,isLoaded:!1}},components:{shoppingCartHeader:o["a"],deletePopover:c["a"]},methods:{deleteSome:function(t){t&&this.getWaitPayOrder()},loadMore:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){var e,r,i,a=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!this.isLoading&&!this.isLoaded){t.next=3;break}return t.abrupt("return");case 3:return this.isLoading=!0,t.next=6,this.$axios.get(d["getWaitPayOrder"],{params:{page_size:this.pageSize,page:this.page}});case 6:e=t.sent,r=e.data,window.requestAnimationFrame(function(){var t;(t=a.order.list).push.apply(t,Object(s["a"])(r.list))}),this.page+=1,r.list.length||(this.isLoaded=!0),this.$nextTick(function(){a.isLoading=!1}),t.next=18;break;case 14:t.prev=14,t.t0=t["catch"](0),i=t.t0.msg,this.$toast.error(i);case 18:case"end":return t.stop()}},t,this,[[0,14]])}));function e(){return t.apply(this,arguments)}return e}(),toOrderDetail:function(t){this.$router.push({name:"orderDetail",params:{id:t.order_id}})},pay:function(t){this.$router.push({name:"pay",query:{order_ids:t.order_id,amount:t.pay_amount}})},getWaitPayOrder:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){var e,r,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.page=1,this.isLoading=!1,this.isLoaded=!1,t.next=6,this.$axios.get(d["getWaitPayOrder"],{params:{page:this.page,page_size:this.pageSize}});case 6:e=t.sent,r=e.data,this.order=r,this.page+=1,t.next=16;break;case 12:t.prev=12,t.t0=t["catch"](0),i=t.t0.msg,this.$toast.error(i);case 16:case"end":return t.stop()}},t,this,[[0,12]])}));function e(){return t.apply(this,arguments)}return e}(),initScroller:function(){var t=this,e=this.$refs.orderScroll;e.addEventListener("scroll",function(r){var i=e.scrollHeight,a=e.scrollTop,s=e.offsetHeight;i-a-s<100&&t.loadMore()})},deleteOrder:function(t){this.$modal.show("deletePopover",{api:"delOrder",query:{order_id:t.order_id}})}},mounted:function(){this.initScroller()},beforeRouteEnter:function(t,e,r){r(function(t){t.getWaitPayOrder()})},beforeRouteUpdate:function(t,e,r){r(),this.$refs.orderScroll.scrollTop=0,this.getWaitPayOrder()}},u=l,p=(r("aefe"),r("17cc")),h=Object(p["a"])(u,i,a,!1,null,"e7b8b8ec",null);e["default"]=h.exports}}]);