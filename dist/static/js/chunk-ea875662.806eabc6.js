(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ea875662"],{"0b2e":function(t,e,a){"use strict";var s=a("9377"),i=a.n(s);i.a},9377:function(t,e,a){},e510:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"scale"}},[a("infinite-scroll",{directives:[{name:"show",rawName:"v-show",value:t.skuDetailShow,expression:"skuDetailShow"}],ref:"goods",staticClass:"good-detail",attrs:{loadMore:t.loadMore}},[t.showBackTop?a("div",{staticClass:"back-top",on:{click:t.scrollToTop}},[a("i",{staticClass:"icon-up-1"})]):t._e(),a("div",{staticClass:"good-detail-close"},[a("i",{staticClass:"icon-close",on:{click:t.closeDetail}})]),a("div",{staticClass:"good-detail-box center"},[a("div",{staticClass:"good-detail-btns"},[a("div",{staticClass:"good-detail-btn",on:{click:function(e){return e.stopPropagation(),t.replaceImage(t.viewImg,t.good)}}},[t._v("替换")]),a("div",{staticClass:"good-detail-btn",on:{click:function(e){return e.stopPropagation(),t.addImage(t.viewImg,t.good)}}},[t._v("添加")]),a("div",{staticClass:"good-detail-btn",class:{"good-detail-btn_active":t.good.is_collection},on:{click:function(e){return e.stopPropagation(),t.collectionGood(t.good)}}},[t._v(t._s(t.good.is_collection?"已收藏":"收藏"))])]),a("div",{staticClass:"good-imgs-select"},t._l(t.good.img,function(e){return a("div",{staticClass:"good-img-item",class:{"img-select":e===t.viewImg},style:{"background-image":"url("+e+"?imageslim)"},on:{click:function(a){return t.changeImg(e)}}})}),0),a("div",{staticClass:"good-detail-img",style:{"background-image":"url("+t.viewImg+"?imageslim)"},attrs:{id:t.good.goods_id}})]),a("div",{staticClass:"good-detail-box"},[a("p",{staticClass:"good-detail-name"},[t._v(t._s(t.good.goods_name))]),a("section",{staticClass:"good-detail-section"},[a("div",{staticClass:"cell disabled"},[a("span",{staticClass:"cell-name"},[t._v("零售价")]),a("span",{staticClass:"cell-value"},[a("span",[t._v("￥")]),a("span",[t._v(t._s(t.good.market_price))])])]),a("div",{staticClass:"cell"},[a("span",{staticClass:"cell-name"},[t._v("会员价")]),a("span",{staticClass:"cell-value"},[a("em",[a("span",[t._v("￥")]),a("span",[t._v(t._s(t.good.shop_price))])])])])]),a("section",{staticClass:"good-detail-section"},[a("div",{staticClass:"cell"},[a("span",{staticClass:"cell-brand cell-name"},[t._v("品牌")]),a("span",{staticClass:"cell-brand-value cell-value"},[t._v(t._s(t.good.brand))])])]),a("section",{staticClass:"good-detail-section"},t._l(t.good.attr,function(e){return a("div",{staticClass:"cell"},[a("span",{staticClass:"cell-name"},[t._v(t._s(e.attr_name)+"：")]),a("span",{staticClass:"cell-value"},[t._v(t._s(e.attr_value))])])}),0)]),a("div",{staticClass:"goods-recommend"},[a("p",{staticClass:"goods-title"},[t._v("品牌商品推荐")]),t.brandCates.length?a("div",{staticClass:"brand-cates"},[a("div",{staticClass:"brand-cate",class:{active:!t.brandCate},on:{click:function(e){return t.selectBrandCate("")}}},[a("touch-ripple",{attrs:{speed:3,opacity:.6}},[a("span",[t._v("全部")])])],1),t._l(t.brandCates,function(e){return a("div",{staticClass:"brand-cate",class:{active:t.brandCate===e.id},on:{click:function(a){return t.selectBrandCate(e.id)}}},[a("touch-ripple",{attrs:{speed:3,opacity:.6}},[a("span",[t._v(t._s(e.name))])])],1)})],2):t._e(),a("div",{staticClass:"goods-list"},t._l(t.brandGoods,function(e){return t.skuId!==e.goods_id?a("div",{staticClass:"goods-body"},[a("div",{key:e.goods_id,staticClass:"good-item",on:{click:function(a){return t.openGoodDetail(e.goods_id,e.key,"brandGoods")}}},[a("div",{staticClass:"good-btns"},[a("div",{staticClass:"good-btn",on:{click:function(a){return a.stopPropagation(),t.replaceImage(e.original_img,e)}}},[t._v("替换")]),a("div",{staticClass:"good-btn",on:{click:function(a){return a.stopPropagation(),t.addImage(e.original_img,e)}}},[t._v("添加")])]),a("div",{staticClass:"good-img",style:{"background-image":"url("+e.original_img+"?imageslim&imageView2/0/w/560)"},attrs:{id:e.goods_id,source:"brandGoods",type:"good"}}),a("div",{staticClass:"good-cell"},[a("div",{staticClass:"good-money-vip"},[a("em",[t._v("¥"+t._s(e.shop_price))]),a("span",[t._v("会员")])]),e.is_collection?a("i",{staticClass:"icon-collection_active",on:{click:function(a){return a.stopPropagation(),t.collectionGood(e)}}}):a("i",{staticClass:"icon-collection",on:{click:function(a){return a.stopPropagation(),t.collectionGood(e)}}})]),a("div",{staticClass:"good-money"},[a("span",[t._v("零售价")]),a("em",[t._v("¥"+t._s(e.market_price))])]),a("p",{staticClass:"good-name"},[t._v(t._s(e.goods_name))])])]):t._e()}),0)])])],1)},i=[],o=a("4964"),n=(a("f763"),a("4453"),a("089b")),c=a("e20c"),r=a("fd88"),d=a("880a"),l=a("591a"),g=a("5428"),u=a.n(g),h={name:"goodDetail",data:function(){return{good:{},brandId:"",brandCate:"",viewImg:"",pageCode:0,isLoading:!1,isLoaded:!1,brandGoods:[],brandCates:[],showBackTop:!1}},watch:{skuId:function(t){t&&this.getGoodDetail()}},methods:Object(c["a"])({},Object(l["b"])(["changeSkuDetail","changeSketchGoods","updateHistory"]),{selectBrandCate:function(t){this.brandCate=t,this.getBrandGoods(this.brandId)},changeImg:function(t){this.viewImg=t},collectionGood:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e){var a,s,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,a=e.is_collection,s=e.goods_id,!a){t.next=7;break}return t.next=5,this.$axios.get(d["unCollection"],{params:{goods_id:s}});case 5:t.next=9;break;case 7:return t.next=9,this.$axios.get(d["setCollection"],{params:{goods_id:s}});case 9:this.$set(e,"is_collection",!a),t.next=16;break;case 12:t.prev=12,t.t0=t["catch"](0),i=t.t0.msg,this.$toast.error(i);case 16:case"end":return t.stop()}},t,this,[[0,12]])}));function e(e){return t.apply(this,arguments)}return e}(),replaceImage:function(t,e){var a=this;if(this.matrix.show)this.$toast.message("请先取消变形");else{var s=canvas.getActiveObjects();if(0!==s.length)if(s.length>1)this.$toast.message("只能替换单个商品");else if("i-text"!==s[0].type){var i=u()();canvas.getActiveObjects().forEach(function(t){t.goods_id&&a.changeSketchGoods({type:"remove",uid:t.uid}),canvas.remove(t)}),canvas.discardActiveObject().renderAll(),fabric.Image.fromURL(t+"?imageslim&imageView2/0/w/1000",function(t){var o=s[0].scaleX*s[0].width/t.width,n=Object(c["a"])({},s[0],{width:t.width,height:t.height,scaleX:o,scaleY:o,_element:t._element,_originalElement:t._originalElement,goods_id:e.goods_id,goods_key:e.key,uid:i});t.set(Object(c["a"])({},n)),canvas.add(t),canvas.setActiveObject(t),a.changeSketchGoods({type:"set",good:Object(c["a"])({},e,{uid:i})}),a.updateHistory()},{crossOrigin:"anonymous"})}else this.$toast.message("文本不能被替换");else this.$toast.message("请先选中被替换的单品")}},addImage:function(t,e){var a=this,s=u()();fabric.Image.fromURL(t+"?imageslim&imageView2/0/w/1000",function(t){t.set({goods_id:e.goods_id,goods_key:e.key,left:100,top:100,uid:s}),t.scaleToWidth(300),canvas.add(t),canvas.setActiveObject(t),a.changeSketchGoods({type:"set",good:Object(c["a"])({},e,{uid:s})}),a.updateHistory()},{crossOrigin:"anonymous"})},loadMore:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){var e,a,s,i,n=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!this.loading&&!this.isLoaded){t.next=3;break}return t.abrupt("return");case 3:return this.loading=!0,t.next=6,this.$axios.get(d["searchSKU"],{params:{brand_id:this.good.brand_id,page_code:this.pageCode,category_id:this.brandCate}});case 6:a=t.sent,s=a.data,this.pageCode=s.page_code,(e=this.brandGoods).push.apply(e,Object(o["a"])(s.ls)),s.ls.length||(this.isLoaded=!0),this.$nextTick(function(){n.loading=!1}),t.next=18;break;case 14:t.prev=14,t.t0=t["catch"](0),i=t.t0.msg,this.$toast.error(i);case 18:case"end":return t.stop()}},t,this,[[0,14]])}));function e(){return t.apply(this,arguments)}return e}(),getGoodDetail:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){var e,a,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$axios.get(d["skuInfo"],{params:{goods_id:this.skuId,key:this.skuKey}});case 3:e=t.sent,a=e.data,this.brandId=a.brand_id,this.getBrandGoods(a.brand_id),this.getBrandCates(a.brand_id),this.viewImg=a.img[0],this.good=a,t.next=16;break;case 12:t.prev=12,t.t0=t["catch"](0),s=t.t0.msg,this.$toast.error(s);case 16:case"end":return t.stop()}},t,this,[[0,12]])}));function e(){return t.apply(this,arguments)}return e}(),getBrandGoods:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e){var a,s,i,o=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.loading=!0,t.next=4,this.$axios.get(d["searchSKU"],{params:{brand_id:e,category_id:this.brandCate}});case 4:a=t.sent,s=a.data,this.brandGoods=s.ls,this.pageCode=s.page_code,this.$nextTick(function(){o.loading=!1}),t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](0),i=t.t0.msg,this.$toast.error(i);case 15:case"end":return t.stop()}},t,this,[[0,11]])}));function e(e){return t.apply(this,arguments)}return e}(),getBrandCates:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e){var a,s,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$axios.get(d["getCategoryList"],{params:{brand_id:e}});case 3:a=t.sent,s=a.data,this.brandCates=s.ls,t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](0),i=t.t0.msg,this.$toast.error(i);case 12:case"end":return t.stop()}},t,this,[[0,8]])}));function e(e){return t.apply(this,arguments)}return e}(),openGoodDetail:function(t,e,a){this.changeSkuDetail({show:!0,id:t,key:e,dataSource:a})},closeDetail:function(){this.changeSkuDetail({show:!1,id:null})},watchScroller:function(){var t=this,e=this.$refs.goods.$el;e.addEventListener("scroll",function(){var e=t.$refs.goods.$el,a=e.scrollTop,s=e.offsetHeight;t.showBackTop=a>=2*s})},scrollToTop:function(){var t=this.$refs.goods.$el;t.scrollTop=0}}),mounted:function(){this.watchScroller()},created:function(){this.skuId&&this.getGoodDetail()},computed:Object(c["a"])({},Object(l["c"])({skuDetailShow:function(t){return t.sketch.skuDetail.show},skuId:function(t){return t.sketch.skuDetail.id},skuKey:function(t){return t.sketch.skuDetail.key},matrix:function(t){return t.sketch.matrix}})),components:{infiniteScroll:r["a"]}},p=h,v=(a("0b2e"),a("17cc")),m=Object(v["a"])(p,s,i,!1,null,"76b1b816",null);e["default"]=m.exports}}]);