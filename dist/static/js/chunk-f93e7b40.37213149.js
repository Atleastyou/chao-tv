(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f93e7b40"],{"2d23":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("modal",{attrs:{name:"vrGoodsList",width:"100%",height:"100%"},on:{"before-open":t.beforeOpen}},[s("div",{staticClass:"list"},[s("div",{staticClass:"list-header"},[s("div",{staticClass:"table-header-item"},[s("div",{staticClass:"icon-close",on:{click:t.close}})]),s("div",{staticClass:"table-header-item table-header-item_goods"},[t._v("商品名称")]),s("div",{staticClass:"table-header-item table-header-item_detail"},[t._v("详情描述")]),s("div",{staticClass:"table-header-item table-header-item_num"},[t._v("数量")]),s("div",{staticClass:"table-header-item table-header-item_stock"},[t._v("库存")]),s("div",{staticClass:"table-header-item table-header-item_price"},[t._v("价格")])]),s("div",{staticClass:"list-content"},[s("div",{staticClass:"content-header"},[t._v("商品清单：")]),t.list.length?s("div",{staticClass:"content-table"},t._l(t.list,function(e){return s("div",{staticClass:"table-item",class:{"table-item--disable":0==e.is_buy}},[s("div",{staticClass:"table-item-cell",staticStyle:{width:"450px",display:"flex","align-items":"center"}},[s("c-radio",{attrs:{disabled:0===e.is_buy,size:"mini"},on:{change:t.selectItem},model:{value:e.checked,callback:function(s){t.$set(e,"checked",s)},expression:"item.checked"}}),s("div",{staticClass:"table-item-img",style:{"background-image":"url("+e.original_img+")"}}),s("div",{staticClass:"table-item-name"},[t._v(t._s(e.goods_name))])],1),s("div",{staticClass:"table-item-cell",staticStyle:{width:"452px","text-align":"center"}},[s("div",{staticClass:"table-item-spec"},[t._v(t._s(e.key_name))])]),s("div",{staticClass:"table-item-cell",staticStyle:{width:"280px","text-align":"center"}},[s("div",{staticClass:"table-item-num"},[s("c-number",{attrs:{disabled:0===e.is_buy,min:1,max:e.store_count},model:{value:e.goods_num,callback:function(s){t.$set(e,"goods_num",s)},expression:"item.goods_num"}})],1)]),s("div",{staticClass:"table-item-cell",staticStyle:{width:"280px","text-align":"center"}},[s("div",{staticClass:"table-item-stock"},[t._v(t._s(e.store_count))])]),s("div",{staticClass:"table-item-cell",staticStyle:{width:"248px","text-align":"center"}},[e.is_buy?s("div",{staticClass:"table-item-price"},[t._v("¥"+t._s(e.shop_price))]):t._e()])])}),0):s("div",{staticClass:"content-info"},[t._v("暂无商品清单")])]),s("div",{staticClass:"list-footer"},[s("div",{staticClass:"footer-radio"},[s("c-radio",{attrs:{size:"mini"},on:{change:t.selectAll},model:{value:t.checkAll,callback:function(e){t.checkAll=e},expression:"checkAll"}}),s("div",{staticClass:"radio-text"},[t._v("全选")])],1),s("div",{staticClass:"footer-btn"},[s("div",{staticClass:"total-money"},[s("div",{staticClass:"total-money-text"},[t._v("合计：")]),s("div",{staticClass:"total-money-num"},[t._v("¥"+t._s(t.totalPrice))])]),s("div",{staticClass:"add-shopping",on:{click:t.addShoppCart}},[t._v("加入购物车")]),s("div",{staticClass:"shopping",on:{click:t.buy}},[t._v("立即购买")])])])])])},a=[],n=s("e20c"),c=(s("f763"),s("4453"),s("089b")),r=s("880a"),o={name:"vrGoodsList",data:function(){return{checkAll:!0,list:[]}},computed:{checkList:function(){return this.list.filter(function(t){return t.checked})},totalPrice:function(){return this.checkList.reduce(function(t,e){return parseFloat(t)+parseFloat(e.shop_price)},0)}},methods:{addShoppCart:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$axios.post(r["sketchAdd"],{goods:this.checkList.map(function(t){return{goods_id:t.goods_id,key:t.key?t.key:"",goods_num:t.goods_num}})});case 3:this.$toast.success("已加入购物车"),t.next=10;break;case 6:t.prev=6,t.t0=t["catch"](0),e=t.t0.msg,this.$toast.error(e);case 10:case"end":return t.stop()}},t,this,[[0,6]])}));function e(){return t.apply(this,arguments)}return e}(),buy:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(){var e,s,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,this.checkList.length){t.next=4;break}return this.$toast.error("请至少先选择一个商品"),t.abrupt("return");case 4:return t.next=6,this.$axios.post(r["sketchBuy"],{goods:this.checkList.map(function(t){return{goods_id:t.goods_id,key:t.key?t.key:"",goods_num:t.goods_num}})});case 6:e=t.sent,s=e.data,this.$router.push({name:"confirmOrder",query:{from:"sketch",token:s.token}}),t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](0),i=t.t0.msg,this.$toast.error(i);case 15:case"end":return t.stop()}},t,this,[[0,11]])}));function e(){return t.apply(this,arguments)}return e}(),selectItem:function(){this.checkAll=this.checkList.length===this.list.length},selectAll:function(){var t=this;this.list.forEach(function(e){e.checked=!!e.is_buy&&t.checkAll})},getVRGoods:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(e){var s,i,a,c,o,l,d,u;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,s=e.config.markers,s){t.next=4;break}return t.abrupt("return");case 4:if(i=s.filter(function(t){return"goods"===t.data.type}),i.length){t.next=7;break}return t.abrupt("return");case 7:return a=i.map(function(t){return{key:t.data.goods.key,goods_id:t.data.goods.goods_id}}),t.next=10,this.$axios.get(r["VRGoods"],{params:{goods:JSON.stringify(a)}});case 10:c=t.sent,o=c.data,l={},o.forEach(function(t){l[t.key]=t}),d=i.map(function(t){var e=t.data.goods;return Object(n["a"])({checked:!!l[e.key]["is_buy"],goods_num:1},e,l[e.key])}),this.list=d,t.next=22;break;case 18:t.prev=18,t.t0=t["catch"](0),u=t.t0.msg,this.$toast.error(u);case 22:case"end":return t.stop()}},t,this,[[0,18]])}));function e(e){return t.apply(this,arguments)}return e}(),close:function(){this.$modal.hide("vrGoodsList")},beforeOpen:function(t){var e=t.params;this.getVRGoods(e)}}},l=o,d=(s("7be1"),s("17cc")),u=Object(d["a"])(l,i,a,!1,null,"3a06f711",null);e["default"]=u.exports},"2f9f":function(t,e,s){},"7be1":function(t,e,s){"use strict";var i=s("2f9f"),a=s.n(i);a.a}}]);